(self.webpackChunkblrec=self.webpackChunkblrec||[]).push([[80],{7612:function(Oe){Oe.exports=function(){"use strict";var W=/^(b|B)$/,l={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},c={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},g={floor:Math.floor,ceil:Math.ceil};function F(e){var m,w,D,I,fe,X,O,R,k,_,x,A,v,P,f,L,se,B,re,K,J,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=[],G=0;if(isNaN(e))throw new TypeError("Invalid number");if(D=!0===h.bits,f=!0===h.unix,A=!0===h.pad,v=void 0!==h.round?h.round:f?1:2,O=void 0!==h.locale?h.locale:"",R=h.localeOptions||{},L=void 0!==h.separator?h.separator:"",se=void 0!==h.spacer?h.spacer:f?"":" ",re=h.symbols||{},B=2===(w=h.base||2)&&h.standard||"jedec",x=h.output||"string",fe=!0===h.fullform,X=h.fullforms instanceof Array?h.fullforms:[],m=void 0!==h.exponent?h.exponent:-1,K=g[h.roundingMethod]||Math.round,k=(_=Number(e))<0,I=w>2?1e3:1024,J=!1===isNaN(h.precision)?parseInt(h.precision,10):0,k&&(_=-_),(-1===m||isNaN(m))&&(m=Math.floor(Math.log(_)/Math.log(I)))<0&&(m=0),m>8&&(J>0&&(J+=8-m),m=8),"exponent"===x)return m;if(0===_)p[0]=0,P=p[1]=f?"":l[B][D?"bits":"bytes"][m];else{G=_/(2===w?Math.pow(2,10*m):Math.pow(1e3,m)),D&&(G*=8)>=I&&m<8&&(G/=I,m++);var ae=Math.pow(10,m>0?v:0);p[0]=K(G*ae)/ae,p[0]===I&&m<8&&void 0===h.exponent&&(p[0]=1,m++),P=p[1]=10===w&&1===m?D?"kb":"kB":l[B][D?"bits":"bytes"][m],f&&(p[1]="jedec"===B?p[1].charAt(0):m>0?p[1].replace(/B$/,""):p[1],W.test(p[1])&&(p[0]=Math.floor(p[0]),p[1]=""))}if(k&&(p[0]=-p[0]),J>0&&(p[0]=p[0].toPrecision(J)),p[1]=re[p[1]]||p[1],!0===O?p[0]=p[0].toLocaleString():O.length>0?p[0]=p[0].toLocaleString(O,R):L.length>0&&(p[0]=p[0].toString().replace(".",L)),A&&!1===Number.isInteger(p[0])&&v>0){var le=L||".",ce=p[0].toString().split(le),pe=ce[1]||"",ue=pe.length,ze=v-ue;p[0]="".concat(ce[0]).concat(le).concat(pe.padEnd(ue+ze,"0"))}return fe&&(p[1]=X[m]?X[m]:c[B][m]+(D?"bit":"byte")+(1===p[0]?"":"s")),"array"===x?p:"object"===x?{value:p[0],symbol:p[1],exponent:m,unit:P}:p.join(se)}return F.partial=function(e){return function(m){return F(m,e)}},F}()},5080:(Oe,W,l)=>{"use strict";l.r(W),l.d(W,{TasksModule:()=>ii});var c=l(8583),g=l(665),F=l(5072),e=l(7716);class m{constructor(s,t){this._document=t;const o=this._textarea=this._document.createElement("textarea"),i=o.style;i.position="fixed",i.top=i.opacity="0",i.left="-999em",o.setAttribute("aria-hidden","true"),o.value=s,this._document.body.appendChild(o)}copy(){const s=this._textarea;let t=!1;try{if(s){const o=this._document.activeElement;s.select(),s.setSelectionRange(0,s.value.length),t=this._document.execCommand("copy"),o&&o.focus()}}catch(o){}return t}destroy(){const s=this._textarea;s&&(s.parentNode&&s.parentNode.removeChild(s),this._textarea=void 0)}}let w=(()=>{class n{constructor(t){this._document=t}copy(t){const o=this.beginCopy(t),i=o.copy();return o.destroy(),i}beginCopy(t){return new m(t,this._document)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(c.K0))},n.\u0275prov=e.Yz7({factory:function(){return new n(e.LFG(c.K0))},token:n,providedIn:"root"}),n})(),X=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({}),n})();var O=l(6704),R=l(7018),k=l(464),_=l(4762),x=l(946),A=l(9765),v=l(6782),P=l(7705),f=l(6182);function L(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"i",1),e.NdJ("click",function(i){return e.CHM(t),e.oxw().closeTag(i)}),e.qZA()}}const se=["*"];let B=(()=>{class n{constructor(t,o,i,r){this.cdr=t,this.renderer=o,this.elementRef=i,this.directionality=r,this.isPresetColor=!1,this.nzMode="default",this.nzChecked=!1,this.nzOnClose=new e.vpe,this.nzCheckedChange=new e.vpe,this.dir="ltr",this.destroy$=new A.xQ,this.elementRef.nativeElement.classList.add("ant-tag")}updateCheckedStatus(){"checkable"===this.nzMode&&(this.nzChecked=!this.nzChecked,this.nzCheckedChange.emit(this.nzChecked))}closeTag(t){this.nzOnClose.emit(t),t.defaultPrevented||this.renderer.removeChild(this.renderer.parentNode(this.elementRef.nativeElement),this.elementRef.nativeElement)}clearPresetColor(){const t=this.elementRef.nativeElement,o=new RegExp(`(ant-tag-(?:${[...P.uf,...P.Bh].join("|")}))`,"g"),i=t.classList.toString(),r=[];let a=o.exec(i);for(;null!==a;)r.push(a[1]),a=o.exec(i);t.classList.remove(...r)}setPresetColor(){const t=this.elementRef.nativeElement;this.clearPresetColor(),this.isPresetColor=!!this.nzColor&&((0,P.o2)(this.nzColor)||(0,P.M8)(this.nzColor)),this.isPresetColor&&t.classList.add(`ant-tag-${this.nzColor}`)}ngOnInit(){var t;null===(t=this.directionality.change)||void 0===t||t.pipe((0,v.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnChanges(t){const{nzColor:o}=t;o&&this.setPresetColor()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.Qsj),e.Y36(e.SBq),e.Y36(x.Is,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-tag"]],hostVars:10,hostBindings:function(t,o){1&t&&e.NdJ("click",function(){return o.updateCheckedStatus()}),2&t&&(e.Udp("background-color",o.isPresetColor?"":o.nzColor),e.ekj("ant-tag-has-color",o.nzColor&&!o.isPresetColor)("ant-tag-checkable","checkable"===o.nzMode)("ant-tag-checkable-checked",o.nzChecked)("ant-tag-rtl","rtl"===o.dir))},inputs:{nzMode:"nzMode",nzChecked:"nzChecked",nzColor:"nzColor"},outputs:{nzOnClose:"nzOnClose",nzCheckedChange:"nzCheckedChange"},exportAs:["nzTag"],features:[e.TTD],ngContentSelectors:se,decls:2,vars:1,consts:[["nz-icon","","nzType","close","class","ant-tag-close-icon","tabindex","-1",3,"click",4,"ngIf"],["nz-icon","","nzType","close","tabindex","-1",1,"ant-tag-close-icon",3,"click"]],template:function(t,o){1&t&&(e.F$t(),e.Hsn(0),e.YNc(1,L,1,0,"i",0)),2&t&&(e.xp6(1),e.Q6J("ngIf","closeable"===o.nzMode))},directives:[c.O5,k.Ls],encapsulation:2,changeDetection:0}),(0,_.gn)([(0,f.yF)()],n.prototype,"nzChecked",void 0),n})(),re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.vT,c.ez,g.u5,k.PV]]}),n})();var K=l(5329);function J(n,s){if(1&n&&(e.TgZ(0,"div",5),e._UZ(1,"nz-skeleton-element",6),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzSize",t.avatar.size||"default")("nzShape",t.avatar.shape||"circle")}}function h(n,s){if(1&n&&e._UZ(0,"h3",7),2&n){const t=e.oxw(2);e.Udp("width",t.toCSSUnit(t.title.width))}}function p(n,s){if(1&n&&e._UZ(0,"li"),2&n){const t=s.index,o=e.oxw(3);e.Udp("width",o.toCSSUnit(o.widthList[t]))}}function G(n,s){if(1&n&&(e.TgZ(0,"ul",8),e.YNc(1,p,1,2,"li",9),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.rowsList)}}function ae(n,s){if(1&n&&(e.ynx(0),e.YNc(1,J,2,2,"div",1),e.TgZ(2,"div",2),e.YNc(3,h,1,2,"h3",3),e.YNc(4,G,2,1,"ul",4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!!t.nzAvatar),e.xp6(2),e.Q6J("ngIf",!!t.nzTitle),e.xp6(1),e.Q6J("ngIf",!!t.nzParagraph)}}function le(n,s){1&n&&(e.ynx(0),e.Hsn(1),e.BQk())}const ce=["*"],ue=["nzType","avatar"];let Xe=(()=>{class n{constructor(t,o,i){this.cdr=t,this.nzActive=!1,this.nzLoading=!0,this.nzRound=!1,this.nzTitle=!0,this.nzAvatar=!1,this.nzParagraph=!0,this.rowsList=[],this.widthList=[],o.addClass(i.nativeElement,"ant-skeleton")}toCSSUnit(t=""){return(0,f.WX)(t)}getTitleProps(){const t=!!this.nzAvatar,o=!!this.nzParagraph;let i="";return!t&&o?i="38%":t&&o&&(i="50%"),Object.assign({width:i},this.getProps(this.nzTitle))}getAvatarProps(){return Object.assign({shape:this.nzTitle&&!this.nzParagraph?"square":"circle",size:"large"},this.getProps(this.nzAvatar))}getParagraphProps(){const t=!!this.nzAvatar,o=!!this.nzTitle,i={};return(!t||!o)&&(i.width="61%"),i.rows=!t&&o?3:2,Object.assign(Object.assign({},i),this.getProps(this.nzParagraph))}getProps(t){return t&&"object"==typeof t?t:{}}getWidthList(){const{width:t,rows:o}=this.paragraph;let i=[];return t&&Array.isArray(t)?i=t:t&&!Array.isArray(t)&&(i=[],i[o-1]=t),i}updateProps(){this.title=this.getTitleProps(),this.avatar=this.getAvatarProps(),this.paragraph=this.getParagraphProps(),this.rowsList=[...Array(this.paragraph.rows)],this.widthList=this.getWidthList(),this.cdr.markForCheck()}ngOnInit(){this.updateProps()}ngOnChanges(t){(t.nzTitle||t.nzAvatar||t.nzParagraph)&&this.updateProps()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.Qsj),e.Y36(e.SBq))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-skeleton"]],hostVars:6,hostBindings:function(t,o){2&t&&e.ekj("ant-skeleton-with-avatar",!!o.nzAvatar)("ant-skeleton-active",o.nzActive)("ant-skeleton-round",!!o.nzRound)},inputs:{nzActive:"nzActive",nzLoading:"nzLoading",nzRound:"nzRound",nzTitle:"nzTitle",nzAvatar:"nzAvatar",nzParagraph:"nzParagraph"},exportAs:["nzSkeleton"],features:[e.TTD],ngContentSelectors:ce,decls:2,vars:2,consts:[[4,"ngIf"],["class","ant-skeleton-header",4,"ngIf"],[1,"ant-skeleton-content"],["class","ant-skeleton-title",3,"width",4,"ngIf"],["class","ant-skeleton-paragraph",4,"ngIf"],[1,"ant-skeleton-header"],["nzType","avatar",3,"nzSize","nzShape"],[1,"ant-skeleton-title"],[1,"ant-skeleton-paragraph"],[3,"width",4,"ngFor","ngForOf"]],template:function(t,o){1&t&&(e.F$t(),e.YNc(0,ae,5,3,"ng-container",0),e.YNc(1,le,2,0,"ng-container",0)),2&t&&(e.Q6J("ngIf",o.nzLoading),e.xp6(1),e.Q6J("ngIf",!o.nzLoading))},directives:function(){return[c.O5,Ke,et,c.sg]},encapsulation:2,changeDetection:0}),n})(),Ke=(()=>{class n{constructor(t){this.elementRef=t,this.nzActive=!1,this.elementRef.nativeElement.classList.add("ant-skeleton","ant-skeleton-element")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq))},n.\u0275dir=e.lG2({type:n,selectors:[["nz-skeleton-element"]],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("ant-skeleton-active",o.nzActive)},inputs:{nzActive:"nzActive",nzType:"nzType"}}),n})(),et=(()=>{class n{constructor(){this.nzShape="circle",this.nzSize="default",this.styleMap={}}ngOnChanges(t){if(t.nzSize&&"number"==typeof this.nzSize){const o=`${this.nzSize}px`;this.styleMap={width:o,height:o,"line-height":o}}else this.styleMap={}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-skeleton-element","nzType","avatar"]],inputs:{nzShape:"nzShape",nzSize:"nzSize"},features:[e.TTD],attrs:ue,decls:1,vars:9,consts:[[1,"ant-skeleton-avatar",3,"ngStyle"]],template:function(t,o){1&t&&e._UZ(0,"span",0),2&t&&(e.ekj("ant-skeleton-avatar-square","square"===o.nzShape)("ant-skeleton-avatar-circle","circle"===o.nzShape)("ant-skeleton-avatar-lg","large"===o.nzSize)("ant-skeleton-avatar-sm","small"===o.nzSize),e.Q6J("ngStyle",o.styleMap))},directives:[c.PC],encapsulation:2,changeDetection:0}),n})(),Se=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.vT,c.ez]]}),n})();var E=l(7420),Ce=l(8453),$=l(4401),ee=l(4453),Q=l(8542),Z=l(5887),H=l(7674),we=l(2079),Pe=l(7070),b=l(2729),ge=l(641),Ze=l(9238),Ne=l(625),j=l(8178),Fe=l(6911),De=l(6756),Ie=l(9374),de=l(4514);const tt=["okBtn"],nt=["cancelBtn"];function ot(n,s){1&n&&e._UZ(0,"div",15)}function it(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"i",17),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("nzType",t||"exclamation-circle")}}function st(n,s){if(1&n&&(e.ynx(0),e.YNc(1,it,2,1,"ng-container",8),e.TgZ(2,"div",16),e._uU(3),e.qZA(),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzIcon),e.xp6(2),e.Oqu(t.nzTitle)}}function rt(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.nzCancelText)}}function at(n,s){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"nzI18n"),e.BQk()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Modal.cancelText")))}function lt(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(t.nzOkText)}}function ct(n,s){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"nzI18n"),e.BQk()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"Modal.okText")))}function pt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",2),e.TgZ(1,"div",3),e.YNc(2,ot,1,0,"div",4),e.TgZ(3,"div",5),e.TgZ(4,"div"),e.TgZ(5,"div",6),e.TgZ(6,"div",7),e.YNc(7,st,4,2,"ng-container",8),e.qZA(),e.TgZ(8,"div",9),e.TgZ(9,"button",10,11),e.NdJ("click",function(){return e.CHM(t),e.oxw().onCancel()}),e.YNc(11,rt,2,1,"ng-container",12),e.YNc(12,at,3,3,"ng-container",12),e.qZA(),e.TgZ(13,"button",13,14),e.NdJ("click",function(){return e.CHM(t),e.oxw().onConfirm()}),e.YNc(15,lt,2,1,"ng-container",12),e.YNc(16,ct,3,3,"ng-container",12),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=e.oxw();e.ekj("ant-popover-rtl","rtl"===t.dir),e.Q6J("cdkTrapFocusAutoCapture",null!==t.nzAutoFocus)("ngClass",t._classMap)("ngStyle",t.nzOverlayStyle)("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("nzNoAnimation",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("@zoomBigMotion","active"),e.xp6(2),e.Q6J("ngIf",t.nzPopconfirmShowArrow),e.xp6(5),e.Q6J("nzStringTemplateOutlet",t.nzTitle),e.xp6(2),e.Q6J("nzSize","small"),e.uIk("cdkFocusInitial","cancel"===t.nzAutoFocus||null),e.xp6(2),e.Q6J("ngIf",t.nzCancelText),e.xp6(1),e.Q6J("ngIf",!t.nzCancelText),e.xp6(1),e.Q6J("nzSize","small")("nzType",t.nzOkType),e.uIk("cdkFocusInitial","ok"===t.nzAutoFocus||null),e.xp6(2),e.Q6J("ngIf",t.nzOkText),e.xp6(1),e.Q6J("ngIf",!t.nzOkText)}}let gt=(()=>{class n extends E.Mg{constructor(t,o,i,r,a,u){super(t,o,i,r,a,u),this._nzModuleName="popconfirm",this.trigger="click",this.placement="top",this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzPopconfirmBackdrop=!1,this.nzAutofocus=null,this.visibleChange=new e.vpe,this.nzOnCancel=new e.vpe,this.nzOnConfirm=new e.vpe,this.componentFactory=this.resolver.resolveComponentFactory(dt)}getProxyPropertyMap(){return Object.assign({nzOkText:["nzOkText",()=>this.nzOkText],nzOkType:["nzOkType",()=>this.nzOkType],nzCancelText:["nzCancelText",()=>this.nzCancelText],nzCondition:["nzCondition",()=>this.nzCondition],nzIcon:["nzIcon",()=>this.nzIcon],nzPopconfirmShowArrow:["nzPopconfirmShowArrow",()=>this.nzPopconfirmShowArrow],nzPopconfirmBackdrop:["nzBackdrop",()=>this.nzPopconfirmBackdrop],nzAutoFocus:["nzAutoFocus",()=>this.nzAutofocus]},super.getProxyPropertyMap())}createComponent(){super.createComponent(),this.component.nzOnCancel.pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.nzOnCancel.emit()}),this.component.nzOnConfirm.pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.nzOnConfirm.emit()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.s_b),e.Y36(e._Vd),e.Y36(e.Qsj),e.Y36(ge.P,9),e.Y36(b.jY))},n.\u0275dir=e.lG2({type:n,selectors:[["","nz-popconfirm",""]],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("ant-popover-open",o.visible)},inputs:{trigger:["nzPopconfirmTrigger","trigger"],placement:["nzPopconfirmPlacement","placement"],nzCondition:"nzCondition",nzPopconfirmShowArrow:"nzPopconfirmShowArrow",nzPopconfirmBackdrop:"nzPopconfirmBackdrop",nzAutofocus:"nzAutofocus",title:["nzPopconfirmTitle","title"],directiveTitle:["nz-popconfirm","directiveTitle"],origin:["nzPopconfirmOrigin","origin"],mouseEnterDelay:["nzPopconfirmMouseEnterDelay","mouseEnterDelay"],mouseLeaveDelay:["nzPopconfirmMouseLeaveDelay","mouseLeaveDelay"],overlayClassName:["nzPopconfirmOverlayClassName","overlayClassName"],overlayStyle:["nzPopconfirmOverlayStyle","overlayStyle"],visible:["nzPopconfirmVisible","visible"],nzOkText:"nzOkText",nzOkType:"nzOkType",nzCancelText:"nzCancelText",nzIcon:"nzIcon"},outputs:{visibleChange:"nzPopconfirmVisibleChange",nzOnCancel:"nzOnCancel",nzOnConfirm:"nzOnConfirm"},exportAs:["nzPopconfirm"],features:[e.qOj]}),(0,_.gn)([(0,f.yF)()],n.prototype,"nzCondition",void 0),(0,_.gn)([(0,f.yF)()],n.prototype,"nzPopconfirmShowArrow",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzPopconfirmBackdrop",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzAutofocus",void 0),n})(),dt=(()=>{class n extends E.XK{constructor(t,o,i,r,a){super(t,i,a),this.elementRef=o,this.noAnimation=a,this.nzCondition=!1,this.nzPopconfirmShowArrow=!0,this.nzOkType="primary",this.nzAutoFocus=null,this.nzOnCancel=new A.xQ,this.nzOnConfirm=new A.xQ,this._trigger="click",this.elementFocusedBeforeModalWasOpened=null,this._prefix="ant-popover",this.document=r}ngOnDestroy(){super.ngOnDestroy(),this.nzOnCancel.complete(),this.nzOnConfirm.complete()}show(){this.nzCondition?this.onConfirm():(this.capturePreviouslyFocusedElement(),super.show())}hide(){super.hide(),this.restoreFocus()}onCancel(){this.nzOnCancel.next(),super.hide()}onConfirm(){this.nzOnConfirm.next(),super.hide()}capturePreviouslyFocusedElement(){this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement)}restoreFocus(){const t=this.elementFocusedBeforeModalWasOpened;if(t&&"function"==typeof t.focus){const o=this.document.activeElement,i=this.elementRef.nativeElement;(!o||o===this.document.body||o===i||i.contains(o))&&t.focus()}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(e.SBq),e.Y36(x.Is,8),e.Y36(c.K0,8),e.Y36(ge.P,9))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-popconfirm"]],viewQuery:function(t,o){if(1&t&&(e.Gf(tt,5,e.SBq),e.Gf(nt,5,e.SBq)),2&t){let i;e.iGM(i=e.CRH())&&(o.okBtn=i),e.iGM(i=e.CRH())&&(o.cancelBtn=i)}},exportAs:["nzPopconfirmComponent"],features:[e.qOj],decls:2,vars:5,consts:[["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayOpen","cdkConnectedOverlayPush","overlayOutsideClick","detach","positionChange"],["overlay","cdkConnectedOverlay"],["cdkTrapFocus","",1,"ant-popover",3,"cdkTrapFocusAutoCapture","ngClass","ngStyle","nzNoAnimation"],[1,"ant-popover-content"],["class","ant-popover-arrow",4,"ngIf"],[1,"ant-popover-inner"],[1,"ant-popover-inner-content"],[1,"ant-popover-message"],[4,"nzStringTemplateOutlet"],[1,"ant-popover-buttons"],["nz-button","",3,"nzSize","click"],["cancelBtn",""],[4,"ngIf"],["nz-button","",3,"nzSize","nzType","click"],["okBtn",""],[1,"ant-popover-arrow"],[1,"ant-popover-message-title"],["nz-icon","","nzTheme","fill",3,"nzType"]],template:function(t,o){1&t&&(e.YNc(0,pt,17,19,"ng-template",0,1,e.W1O),e.NdJ("overlayOutsideClick",function(r){return o.onClickOutside(r)})("detach",function(){return o.hide()})("positionChange",function(r){return o.onPositionChange(r)})),2&t&&e.Q6J("cdkConnectedOverlayHasBackdrop",o.nzBackdrop)("cdkConnectedOverlayOrigin",o.origin)("cdkConnectedOverlayPositions",o._positions)("cdkConnectedOverlayOpen",o._visible)("cdkConnectedOverlayPush",!0)},directives:[Ne.pI,Fe.hQ,Ze.mK,c.mk,c.PC,ge.P,c.O5,j.f,ee.ix,Ie.dQ,de.w,k.Ls],pipes:[De.o9],encapsulation:2,data:{animation:[Pe.$C]},changeDetection:0}),n})(),mt=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.vT,c.ez,ee.sL,Ne.U8,De.YI,k.PV,j.T,Fe.e4,ge.g,E.cg,Ze.rt]]}),n})();var me=l(1398),Be=l(3385),Je=l(2482),Ee=l(1729);function _t(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"i",5),e.BQk()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("nzType",t.nzIconType||t.inferredIconType)("nzTheme",t.iconTheme)}}function ht(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Oqu(t.nzMessage)}}function ft(n,s){if(1&n&&(e.TgZ(0,"span",9),e.YNc(1,ht,2,1,"ng-container",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzMessage)}}function zt(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw(4);e.xp6(1),e.Oqu(t.nzDescription)}}function Ct(n,s){if(1&n&&(e.TgZ(0,"span",11),e.YNc(1,zt,2,1,"ng-container",10),e.qZA()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzDescription)}}function Tt(n,s){if(1&n&&(e.TgZ(0,"div",6),e.YNc(1,ft,2,1,"span",7),e.YNc(2,Ct,2,1,"span",8),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.nzMessage),e.xp6(1),e.Q6J("ngIf",t.nzDescription)}}function kt(n,s){1&n&&e._UZ(0,"i",15)}function xt(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"span",16),e._uU(2),e.qZA(),e.BQk()),2&n){const t=e.oxw(4);e.xp6(2),e.Oqu(t.nzCloseText)}}function vt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,xt,3,1,"ng-container",10),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzStringTemplateOutlet",t.nzCloseText)}}function bt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",12),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeAlert()}),e.YNc(1,kt,1,0,"ng-template",null,13,e.W1O),e.YNc(3,vt,2,1,"ng-container",14),e.qZA()}if(2&n){const t=e.MAs(2),o=e.oxw(2);e.xp6(3),e.Q6J("ngIf",o.nzCloseText)("ngIfElse",t)}}function yt(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("@slideAlertMotion.done",function(){return e.CHM(t),e.oxw().onFadeAnimationDone()}),e.YNc(1,_t,2,2,"ng-container",2),e.YNc(2,Tt,3,2,"div",3),e.YNc(3,bt,4,2,"button",4),e.qZA()}if(2&n){const t=e.oxw();e.ekj("ant-alert-rtl","rtl"===t.dir)("ant-alert-success","success"===t.nzType)("ant-alert-info","info"===t.nzType)("ant-alert-warning","warning"===t.nzType)("ant-alert-error","error"===t.nzType)("ant-alert-no-icon",!t.nzShowIcon)("ant-alert-banner",t.nzBanner)("ant-alert-closable",t.nzCloseable)("ant-alert-with-description",!!t.nzDescription),e.Q6J("@.disabled",t.nzNoAnimation)("@slideAlertMotion",void 0),e.xp6(1),e.Q6J("ngIf",t.nzShowIcon),e.xp6(1),e.Q6J("ngIf",t.nzMessage||t.nzDescription),e.xp6(1),e.Q6J("ngIf",t.nzCloseable||t.nzCloseText)}}let Mt=(()=>{class n{constructor(t,o,i){this.nzConfigService=t,this.cdr=o,this.directionality=i,this._nzModuleName="alert",this.nzCloseText=null,this.nzIconType=null,this.nzMessage=null,this.nzDescription=null,this.nzType="info",this.nzCloseable=!1,this.nzShowIcon=!1,this.nzBanner=!1,this.nzNoAnimation=!1,this.nzOnClose=new e.vpe,this.closed=!1,this.iconTheme="fill",this.inferredIconType="info-circle",this.dir="ltr",this.isTypeSet=!1,this.isShowIconSet=!1,this.destroy$=new A.xQ,this.nzConfigService.getConfigChangeEventForComponent("alert").pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){var t;null===(t=this.directionality.change)||void 0===t||t.pipe((0,v.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}closeAlert(){this.closed=!0}onFadeAnimationDone(){this.closed&&this.nzOnClose.emit(!0)}ngOnChanges(t){const{nzShowIcon:o,nzDescription:i,nzType:r,nzBanner:a}=t;if(o&&(this.isShowIconSet=!0),r)switch(this.isTypeSet=!0,this.nzType){case"error":this.inferredIconType="close-circle";break;case"success":this.inferredIconType="check-circle";break;case"info":this.inferredIconType="info-circle";break;case"warning":this.inferredIconType="exclamation-circle"}i&&(this.iconTheme=this.nzDescription?"outline":"fill"),a&&(this.isTypeSet||(this.nzType="warning"),this.isShowIconSet||(this.nzShowIcon=!0))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(b.jY),e.Y36(e.sBO),e.Y36(x.Is,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-alert"]],inputs:{nzCloseText:"nzCloseText",nzIconType:"nzIconType",nzMessage:"nzMessage",nzDescription:"nzDescription",nzType:"nzType",nzCloseable:"nzCloseable",nzShowIcon:"nzShowIcon",nzBanner:"nzBanner",nzNoAnimation:"nzNoAnimation"},outputs:{nzOnClose:"nzOnClose"},exportAs:["nzAlert"],features:[e.TTD],decls:1,vars:1,consts:[["class","ant-alert",3,"ant-alert-rtl","ant-alert-success","ant-alert-info","ant-alert-warning","ant-alert-error","ant-alert-no-icon","ant-alert-banner","ant-alert-closable","ant-alert-with-description",4,"ngIf"],[1,"ant-alert"],[4,"ngIf"],["class","ant-alert-content",4,"ngIf"],["type","button","tabindex","0","class","ant-alert-close-icon",3,"click",4,"ngIf"],["nz-icon","",1,"ant-alert-icon",3,"nzType","nzTheme"],[1,"ant-alert-content"],["class","ant-alert-message",4,"ngIf"],["class","ant-alert-description",4,"ngIf"],[1,"ant-alert-message"],[4,"nzStringTemplateOutlet"],[1,"ant-alert-description"],["type","button","tabindex","0",1,"ant-alert-close-icon",3,"click"],["closeDefaultTemplate",""],[4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"],[1,"ant-alert-close-text"]],template:function(t,o){1&t&&e.YNc(0,yt,4,23,"div",0),2&t&&e.Q6J("ngIf",!o.closed)},directives:[c.O5,k.Ls,j.f],encapsulation:2,data:{animation:[Pe.Rq]},changeDetection:0}),(0,_.gn)([(0,b.oS)(),(0,f.yF)()],n.prototype,"nzCloseable",void 0),(0,_.gn)([(0,b.oS)(),(0,f.yF)()],n.prototype,"nzShowIcon",void 0),(0,_.gn)([(0,f.yF)()],n.prototype,"nzBanner",void 0),(0,_.gn)([(0,f.yF)()],n.prototype,"nzNoAnimation",void 0),n})(),At=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.vT,c.ez,k.PV,j.T]]}),n})();var te=l(3721),Te=l(269);function Ot(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"i",8),e.BQk()),2&n){const t=e.oxw(3);e.xp6(1),e.Q6J("nzType",t.icon)}}function St(n,s){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=s.$implicit,o=e.oxw(4);e.xp6(1),e.hij(" ",t(o.nzPercent)," ")}}const wt=function(n){return{$implicit:n}};function Pt(n,s){if(1&n&&e.YNc(0,St,2,1,"ng-container",9),2&n){const t=e.oxw(3);e.Q6J("nzStringTemplateOutlet",t.formatter)("nzStringTemplateOutletContext",e.VKq(2,wt,t.nzPercent))}}function Zt(n,s){if(1&n&&(e.TgZ(0,"span",5),e.YNc(1,Ot,2,1,"ng-container",6),e.YNc(2,Pt,1,4,"ng-template",null,7,e.W1O),e.qZA()),2&n){const t=e.MAs(3),o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",("exception"===o.status||"success"===o.status)&&!o.nzFormat)("ngIfElse",t)}}function Nt(n,s){if(1&n&&e.YNc(0,Zt,4,2,"span",4),2&n){const t=e.oxw();e.Q6J("ngIf",t.nzShowInfo)}}function Ft(n,s){if(1&n&&e._UZ(0,"div",17),2&n){const t=e.oxw(4);e.Udp("width",t.nzSuccessPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("height",t.strokeWidth,"px")}}function Dt(n,s){if(1&n&&(e.TgZ(0,"div",13),e.TgZ(1,"div",14),e._UZ(2,"div",15),e.YNc(3,Ft,1,6,"div",16),e.qZA(),e.qZA()),2&n){const t=e.oxw(3);e.xp6(2),e.Udp("width",t.nzPercent,"%")("border-radius","round"===t.nzStrokeLinecap?"100px":"0")("background",t.isGradient?null:t.nzStrokeColor)("background-image",t.isGradient?t.lineGradient:null)("height",t.strokeWidth,"px"),e.xp6(1),e.Q6J("ngIf",t.nzSuccessPercent||0===t.nzSuccessPercent)}}function It(n,s){}function Bt(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Dt,4,11,"div",11),e.YNc(2,It,0,0,"ng-template",12),e.BQk()),2&n){const t=e.oxw(2),o=e.MAs(1);e.xp6(1),e.Q6J("ngIf",!t.isSteps),e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function Jt(n,s){1&n&&e._UZ(0,"div",20),2&n&&e.Q6J("ngStyle",s.$implicit)}function Et(n,s){}function Qt(n,s){if(1&n&&(e.TgZ(0,"div",18),e.YNc(1,Jt,1,1,"div",19),e.YNc(2,Et,0,0,"ng-template",12),e.qZA()),2&n){const t=e.oxw(2),o=e.MAs(1);e.xp6(1),e.Q6J("ngForOf",t.steps),e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function Yt(n,s){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,Bt,3,2,"ng-container",2),e.YNc(2,Qt,3,2,"div",10),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.isSteps),e.xp6(1),e.Q6J("ngIf",t.isSteps)}}function Ut(n,s){if(1&n&&(e.O4$(),e._UZ(0,"stop")),2&n){const t=s.$implicit;e.uIk("offset",t.offset)("stop-color",t.color)}}function qt(n,s){if(1&n&&(e.O4$(),e.TgZ(0,"defs"),e.TgZ(1,"linearGradient",24),e.YNc(2,Ut,1,2,"stop",25),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("id","gradient-"+t.gradientId),e.xp6(1),e.Q6J("ngForOf",t.circleGradient)}}function Rt(n,s){if(1&n&&(e.O4$(),e._UZ(0,"path",26)),2&n){const t=s.$implicit,o=e.oxw(2);e.Q6J("ngStyle",t.strokePathStyle),e.uIk("d",o.pathString)("stroke-linecap",o.nzStrokeLinecap)("stroke",t.stroke)("stroke-width",o.nzPercent?o.strokeWidth:0)}}function Lt(n,s){1&n&&e.O4$()}function Gt(n,s){if(1&n&&(e.TgZ(0,"div",14),e.O4$(),e.TgZ(1,"svg",21),e.YNc(2,qt,3,2,"defs",2),e._UZ(3,"path",22),e.YNc(4,Rt,1,5,"path",23),e.qZA(),e.YNc(5,Lt,0,0,"ng-template",12),e.qZA()),2&n){const t=e.oxw(),o=e.MAs(1);e.Udp("width",t.nzWidth,"px")("height",t.nzWidth,"px")("font-size",.15*t.nzWidth+6,"px"),e.ekj("ant-progress-circle-gradient",t.isGradient),e.xp6(2),e.Q6J("ngIf",t.isGradient),e.xp6(1),e.Q6J("ngStyle",t.trailPathStyle),e.uIk("stroke-width",t.strokeWidth)("d",t.pathString),e.xp6(1),e.Q6J("ngForOf",t.progressCirclePath)("ngForTrackBy",t.trackByFn),e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}const Ye=n=>{let s=[];return Object.keys(n).forEach(t=>{const o=n[t],i=function(n){return+n.replace("%","")}(t);isNaN(i)||s.push({key:i,value:o})}),s=s.sort((t,o)=>t.key-o.key),s};let Vt=0;const Ue="progress",Wt=new Map([["success","check"],["exception","close"]]),Xt=new Map([["normal","#108ee9"],["exception","#ff5500"],["success","#87d068"]]),Kt=n=>`${n}%`;let en=(()=>{class n{constructor(t,o,i){this.cdr=t,this.nzConfigService=o,this.directionality=i,this._nzModuleName=Ue,this.nzShowInfo=!0,this.nzWidth=132,this.nzStrokeColor=void 0,this.nzSize="default",this.nzPercent=0,this.nzStrokeWidth=void 0,this.nzGapDegree=void 0,this.nzType="line",this.nzGapPosition="top",this.nzStrokeLinecap="round",this.nzSteps=0,this.steps=[],this.lineGradient=null,this.isGradient=!1,this.isSteps=!1,this.gradientId=Vt++,this.progressCirclePath=[],this.trailPathStyle=null,this.dir="ltr",this.trackByFn=r=>`${r}`,this.cachedStatus="normal",this.inferredStatus="normal",this.destroy$=new A.xQ}get formatter(){return this.nzFormat||Kt}get status(){return this.nzStatus||this.inferredStatus}get strokeWidth(){return this.nzStrokeWidth||("line"===this.nzType&&"small"!==this.nzSize?8:6)}get isCircleStyle(){return"circle"===this.nzType||"dashboard"===this.nzType}ngOnChanges(t){const{nzSteps:o,nzGapPosition:i,nzStrokeLinecap:r,nzStrokeColor:a,nzGapDegree:u,nzType:d,nzStatus:T,nzPercent:M,nzSuccessPercent:V,nzStrokeWidth:ie}=t;T&&(this.cachedStatus=this.nzStatus||this.cachedStatus),(M||V)&&(parseInt(this.nzPercent.toString(),10)>=100?((0,f.DX)(this.nzSuccessPercent)&&this.nzSuccessPercent>=100||void 0===this.nzSuccessPercent)&&(this.inferredStatus="success"):this.inferredStatus=this.cachedStatus),(T||M||V||a)&&this.updateIcon(),a&&this.setStrokeColor(),(i||r||u||d||M||a||a)&&this.getCirclePaths(),(M||o||ie)&&(this.isSteps=this.nzSteps>0,this.isSteps&&this.getSteps())}ngOnInit(){var t;this.nzConfigService.getConfigChangeEventForComponent(Ue).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.updateIcon(),this.setStrokeColor(),this.getCirclePaths()}),null===(t=this.directionality.change)||void 0===t||t.pipe((0,v.R)(this.destroy$)).subscribe(o=>{this.dir=o,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}updateIcon(){const t=Wt.get(this.status);this.icon=t?t+(this.isCircleStyle?"-o":"-circle-fill"):""}getSteps(){const t=Math.floor(this.nzSteps*(this.nzPercent/100)),o="small"===this.nzSize?2:14,i=[];for(let r=0;r<this.nzSteps;r++){let a;r<=t-1&&(a=this.nzStrokeColor),i.push({backgroundColor:`${a}`,width:`${o}px`,height:`${this.strokeWidth}px`})}this.steps=i}getCirclePaths(){if(!this.isCircleStyle)return;const t=(0,f.DX)(this.nzSuccessPercent)?[this.nzSuccessPercent,this.nzPercent]:[this.nzPercent],o=50-this.strokeWidth/2,r=2*Math.PI*o,a=this.nzGapDegree||("circle"===this.nzType?0:75);let u=0,d=-o,T=0,M=-2*o;switch(this.nzGapPosition||("circle"===this.nzType?"top":"bottom")){case"left":u=-o,d=0,T=2*o,M=0;break;case"right":u=o,d=0,T=-2*o,M=0;break;case"bottom":d=o,M=2*o}this.pathString=`M 50,50 m ${u},${d}\n       a ${o},${o} 0 1 1 ${T},${-M}\n       a ${o},${o} 0 1 1 ${-T},${M}`,this.trailPathStyle={strokeDasharray:`${r-a}px ${r}px`,strokeDashoffset:`-${a/2}px`,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s"},this.progressCirclePath=t.map((V,ie)=>{const Ae=2===t.length&&0===ie;return{stroke:this.isGradient&&!Ae?`url(#gradient-${this.gradientId})`:null,strokePathStyle:{stroke:this.isGradient?null:Ae?Xt.get("success"):this.nzStrokeColor,transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s",strokeDasharray:`${(V||0)/100*(r-a)}px ${r}px`,strokeDashoffset:`-${a/2}px`}}}).reverse()}setStrokeColor(){const t=this.nzStrokeColor,o=this.isGradient=!!t&&"string"!=typeof t;o&&!this.isCircleStyle?this.lineGradient=(n=>{const{from:s="#1890ff",to:t="#1890ff",direction:o="to right"}=n,i=(0,_._T)(n,["from","to","direction"]);return 0!==Object.keys(i).length?`linear-gradient(${o}, ${Ye(i).map(({key:a,value:u})=>`${u} ${a}%`).join(", ")})`:`linear-gradient(${o}, ${s}, ${t})`})(t):o&&this.isCircleStyle?this.circleGradient=(n=>Ye(this.nzStrokeColor).map(({key:s,value:t})=>({offset:`${s}%`,color:t})))():(this.lineGradient=null,this.circleGradient=[])}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(b.jY),e.Y36(x.Is,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["nz-progress"]],inputs:{nzShowInfo:"nzShowInfo",nzWidth:"nzWidth",nzStrokeColor:"nzStrokeColor",nzSize:"nzSize",nzPercent:"nzPercent",nzStrokeWidth:"nzStrokeWidth",nzGapDegree:"nzGapDegree",nzType:"nzType",nzGapPosition:"nzGapPosition",nzStrokeLinecap:"nzStrokeLinecap",nzSteps:"nzSteps",nzFormat:"nzFormat",nzSuccessPercent:"nzSuccessPercent",nzStatus:"nzStatus"},exportAs:["nzProgress"],features:[e.TTD],decls:5,vars:15,consts:[["progressInfoTemplate",""],[3,"ngClass"],[4,"ngIf"],["class","ant-progress-inner",3,"width","height","fontSize","ant-progress-circle-gradient",4,"ngIf"],["class","ant-progress-text",4,"ngIf"],[1,"ant-progress-text"],[4,"ngIf","ngIfElse"],["formatTemplate",""],["nz-icon","",3,"nzType"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-progress-steps-outer",4,"ngIf"],["class","ant-progress-outer",4,"ngIf"],[3,"ngTemplateOutlet"],[1,"ant-progress-outer"],[1,"ant-progress-inner"],[1,"ant-progress-bg"],["class","ant-progress-success-bg",3,"width","border-radius","height",4,"ngIf"],[1,"ant-progress-success-bg"],[1,"ant-progress-steps-outer"],["class","ant-progress-steps-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"ant-progress-steps-item",3,"ngStyle"],["viewBox","0 0 100 100",1,"ant-progress-circle"],["stroke","#f3f3f3","fill-opacity","0",1,"ant-progress-circle-trail",3,"ngStyle"],["class","ant-progress-circle-path","fill-opacity","0",3,"ngStyle",4,"ngFor","ngForOf","ngForTrackBy"],["x1","100%","y1","0%","x2","0%","y2","0%",3,"id"],[4,"ngFor","ngForOf"],["fill-opacity","0",1,"ant-progress-circle-path",3,"ngStyle"]],template:function(t,o){1&t&&(e.YNc(0,Nt,1,1,"ng-template",null,0,e.W1O),e.TgZ(2,"div",1),e.YNc(3,Yt,3,2,"div",2),e.YNc(4,Gt,6,15,"div",3),e.qZA()),2&t&&(e.xp6(2),e.ekj("ant-progress-line","line"===o.nzType)("ant-progress-small","small"===o.nzSize)("ant-progress-show-info",o.nzShowInfo)("ant-progress-circle",o.isCircleStyle)("ant-progress-steps",o.isSteps)("ant-progress-rtl","rtl"===o.dir),e.Q6J("ngClass","ant-progress ant-progress-status-"+o.status),e.xp6(1),e.Q6J("ngIf","line"===o.nzType),e.xp6(1),e.Q6J("ngIf",o.isCircleStyle))},directives:[c.mk,c.O5,k.Ls,j.f,c.tP,c.sg,c.PC],encapsulation:2,changeDetection:0}),(0,_.gn)([(0,b.oS)()],n.prototype,"nzShowInfo",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzStrokeColor",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzSize",void 0),(0,_.gn)([(0,f.Rn)()],n.prototype,"nzSuccessPercent",void 0),(0,_.gn)([(0,f.Rn)()],n.prototype,"nzPercent",void 0),(0,_.gn)([(0,b.oS)(),(0,f.Rn)()],n.prototype,"nzStrokeWidth",void 0),(0,_.gn)([(0,b.oS)(),(0,f.Rn)()],n.prototype,"nzGapDegree",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzGapPosition",void 0),(0,_.gn)([(0,b.oS)()],n.prototype,"nzStrokeLinecap",void 0),(0,_.gn)([(0,f.Rn)()],n.prototype,"nzSteps",void 0),n})(),tn=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[x.vT,c.ez,k.PV,j.T]]}),n})();var nn=l(4466),qe=l(6983),on=l(5766),Re=l(3190),_e=l(5304),Y=l(5917),sn=l(8891),Le=l(3637),rn=l(6561);function ln(n){const{subscriber:s,counter:t,period:o}=n;s.next(t),this.schedule({subscriber:s,counter:t+1,period:o},o)}var y=(()=>{return(n=y||(y={})).ALL="all",n.PREPARING="preparing",n.LIVING="living",n.ROUNDING="rounding",n.MONITOR_ENABLED="monitor_enabled",n.MONITOR_DISABLED="monitor_disabled",n.RECORDER_ENABLED="recorder_enabled",n.RECORDER_DISABLED="recorder_disabled",n.STOPPED="stopped",n.WAITTING="waitting",n.RECORDING="recording",n.REMUXING="remuxing",n.INJECTING="injecting",y;var n})(),S=(()=>{return(n=S||(S={})).STOPPED="stopped",n.WAITING="waiting",n.RECORDING="recording",n.REMUXING="remuxing",n.INJECTING="injecting",S;var n})(),Ge=l(9825),cn=l(3080),pn=l(2323),un=l(2340),gn=l(1841);const z=un.N.apiUrl;let $e=(()=>{class n{constructor(t){this.http=t}getAllTaskData(t=y.ALL){return this.http.get(z+"/api/v1/tasks/data",{params:{select:t}})}getTaskData(t){return this.http.get(z+`/api/v1/tasks/${t}/data`)}getTaskFileDetails(t){return this.http.get(z+`/api/v1/tasks/${t}/files`)}getTaskParam(t){return this.http.get(z+`/api/v1/tasks/${t}/param`)}updateAllTaskInfos(){return this.http.post(z+"/api/v1/tasks/info",null)}updateTaskInfo(t){return this.http.post(z+`/api/v1/tasks/${t}/info`,null)}addTask(t){return this.http.post(z+`/api/v1/tasks/${t}`,null)}removeTask(t){return this.http.delete(z+`/api/v1/tasks/${t}`)}removeAllTasks(){return this.http.delete(z+"/api/v1/tasks")}startTask(t){return this.http.post(z+`/api/v1/tasks/${t}/start`,null)}startAllTasks(){return this.http.post(z+"/api/v1/tasks/start",null)}stopTask(t,o=!1,i=!1){return this.http.post(z+`/api/v1/tasks/${t}/stop`,{force:o,background:i})}stopAllTasks(t=!1,o=!1){return this.http.post(z+"/api/v1/tasks/stop",{force:t,background:o})}enableTaskMonitor(t){return this.http.post(z+`/api/v1/tasks/${t}/monitor/enable`,null)}enableAllMonitors(){return this.http.post(z+"/api/v1/tasks/monitor/enable",null)}disableTaskMonitor(t,o=!1){return this.http.post(z+`/api/v1/tasks/${t}/monitor/disable`,{background:o})}disableAllMonitors(t=!1){return this.http.post(z+"/api/v1/tasks/monitor/disable",{background:t})}enableTaskRecorder(t){return this.http.post(z+`/api/v1/tasks/${t}/recorder/enable`,null)}enableAllRecorders(){return this.http.post(z+"/api/v1/tasks/recorder/enable",null)}disableTaskRecorder(t,o=!1,i=!1){return this.http.post(z+`/api/v1/tasks/${t}/recorder/disable`,{force:o,background:i})}disableAllRecorders(t=!1,o=!1){return this.http.post(z+"/api/v1/tasks/recorder/disable",{force:t,background:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(gn.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var dn=l(4395),mn=l(7519),U=l(8002),C=l(8307);const ne=["(max-width: 534.98px)","(min-width: 535px) and (max-width: 1059.98px)","(min-width: 1060px)"];var ke=l(8058);let xe=(()=>{class n{constructor(t,o){this.message=t,this.taskService=o}getAllTaskRoomIds(){return this.taskService.getAllTaskData().pipe((0,U.U)(t=>t.map(o=>o.room_info.room_id)))}updateTaskInfo(t){return this.taskService.updateTaskInfo(t).pipe((0,C.b)(()=>{this.message.success("\u6210\u529f\u5237\u65b0\u4efb\u52a1\u7684\u6570\u636e")},o=>{this.message.error(`\u5237\u65b0\u4efb\u52a1\u7684\u6570\u636e\u51fa\u9519: ${o.message}`)}))}updateAllTaskInfos(){return this.taskService.updateAllTaskInfos().pipe((0,C.b)(()=>{this.message.success("\u6210\u529f\u5237\u65b0\u5168\u90e8\u4efb\u52a1\u7684\u6570\u636e")},t=>{this.message.error(`\u5237\u65b0\u5168\u90e8\u4efb\u52a1\u7684\u6570\u636e\u51fa\u9519: ${t.message}`)}))}addTask(t){return this.taskService.addTask(t).pipe((0,U.U)(o=>({type:"success",message:"\u6210\u529f\u6dfb\u52a0\u4efb\u52a1"})),(0,_e.K)(o=>{let i;return i=409==o.status?{type:"error",message:"\u4efb\u52a1\u5df2\u5b58\u5728\uff0c\u4e0d\u80fd\u91cd\u590d\u6dfb\u52a0\u3002"}:403==o.status?{type:"warning",message:"\u4efb\u52a1\u6570\u91cf\u8d85\u8fc7\u9650\u5236\uff0c\u4e0d\u80fd\u6dfb\u52a0\u4efb\u52a1\u3002"}:404==o.status?{type:"error",message:"\u76f4\u64ad\u95f4\u4e0d\u5b58\u5728"}:{type:"error",message:`\u6dfb\u52a0\u4efb\u52a1\u51fa\u9519: ${o.message}`},(0,Y.of)(i)}),(0,U.U)(o=>(o.message=`${t}: ${o.message}`,o)),(0,C.b)(o=>{this.message[o.type](o.message)}))}removeTask(t){return this.taskService.removeTask(t).pipe((0,C.b)(()=>{this.message.success("\u4efb\u52a1\u5df2\u5220\u9664")},o=>{this.message.error(`\u5220\u9664\u4efb\u52a1\u51fa\u9519: ${o.message}`)}))}removeAllTasks(){const t=this.message.loading("\u6b63\u5728\u5220\u9664\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.removeAllTasks().pipe((0,C.b)(()=>{this.message.remove(t),this.message.success("\u6210\u529f\u5220\u9664\u5168\u90e8\u4efb\u52a1")},o=>{this.message.remove(t),this.message.error(`\u5220\u9664\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${o.message}`)}))}startTask(t){const o=this.message.loading("\u6b63\u5728\u8fd0\u884c\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.startTask(t).pipe((0,C.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u8fd0\u884c\u4efb\u52a1")},i=>{this.message.remove(o),this.message.error(`\u8fd0\u884c\u4efb\u52a1\u51fa\u9519: ${i.message}`)}))}startAllTasks(){const t=this.message.loading("\u6b63\u5728\u8fd0\u884c\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.startAllTasks().pipe((0,C.b)(()=>{this.message.remove(t),this.message.success("\u6210\u529f\u8fd0\u884c\u5168\u90e8\u4efb\u52a1")},o=>{this.message.remove(t),this.message.error(`\u8fd0\u884c\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${o.message}`)}))}stopTask(t,o=!1){const i=this.message.loading("\u6b63\u5728\u505c\u6b62\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.stopTask(t,o).pipe((0,C.b)(()=>{this.message.remove(i),this.message.success("\u6210\u529f\u505c\u6b62\u4efb\u52a1")},r=>{this.message.remove(i),this.message.error(`\u505c\u6b62\u4efb\u52a1\u51fa\u9519: ${r.message}`)}))}stopAllTasks(t=!1){const o=this.message.loading("\u6b63\u5728\u505c\u6b62\u5168\u90e8\u4efb\u52a1...",{nzDuration:0}).messageId;return this.taskService.stopAllTasks(t).pipe((0,C.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u505c\u6b62\u5168\u90e8\u4efb\u52a1")},i=>{this.message.remove(o),this.message.error(`\u505c\u6b62\u5168\u90e8\u4efb\u52a1\u51fa\u9519: ${i.message}`)}))}enableRecorder(t){const o=this.message.loading("\u6b63\u5728\u5f00\u542f\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.enableTaskRecorder(t).pipe((0,C.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u5f00\u542f\u5f55\u5236")},i=>{this.message.remove(o),this.message.error(`\u5f00\u542f\u5f55\u5236\u51fa\u9519: ${i.message}`)}))}enableAllRecorders(){const t=this.message.loading("\u6b63\u5728\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.enableAllRecorders().pipe((0,C.b)(()=>{this.message.remove(t),this.message.success("\u6210\u529f\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236")},o=>{this.message.remove(t),this.message.error(`\u5f00\u542f\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\u51fa\u9519: ${o.message}`)}))}disableRecorder(t,o=!1){const i=this.message.loading("\u6b63\u5728\u5173\u95ed\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.disableTaskRecorder(t,o).pipe((0,C.b)(()=>{this.message.remove(i),this.message.success("\u6210\u529f\u5173\u95ed\u5f55\u5236")},r=>{this.message.remove(i),this.message.error(`\u5173\u95ed\u5f55\u5236\u51fa\u9519: ${r.message}`)}))}disableAllRecorders(t=!1){const o=this.message.loading("\u6b63\u5728\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236...",{nzDuration:0}).messageId;return this.taskService.disableAllRecorders(t).pipe((0,C.b)(()=>{this.message.remove(o),this.message.success("\u6210\u529f\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236")},i=>{this.message.remove(o),this.message.error(`\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\u51fa\u9519: ${i.message}`)}))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(ke.dD),e.LFG($e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var oe=l(3730);function _n(n,s){if(1&n&&(e.ynx(0),e.GkF(1,8),e._UZ(2,"nz-divider",13),e.GkF(3,8),e._UZ(4,"nz-divider",13),e.GkF(5,8),e._UZ(6,"nz-divider",13),e.GkF(7,8),e.BQk()),2&n){e.oxw();const t=e.MAs(5),o=e.MAs(9),i=e.MAs(11),r=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t),e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(2),e.Q6J("ngTemplateOutlet",i),e.xp6(2),e.Q6J("ngTemplateOutlet",r)}}function hn(n,s){if(1&n&&(e.ynx(0),e.GkF(1,8),e._UZ(2,"nz-divider",13),e.GkF(3,8),e._UZ(4,"nz-divider",13),e.GkF(5,8),e._UZ(6,"nz-divider",13),e.GkF(7,8),e.BQk()),2&n){e.oxw();const t=e.MAs(7),o=e.MAs(9),i=e.MAs(11),r=e.MAs(13);e.xp6(1),e.Q6J("ngTemplateOutlet",t),e.xp6(2),e.Q6J("ngTemplateOutlet",o),e.xp6(2),e.Q6J("ngTemplateOutlet",i),e.xp6(2),e.Q6J("ngTemplateOutlet",r)}}function fn(n,s){if(1&n&&(e.ynx(0),e.GkF(1,8),e.GkF(2,8),e.BQk()),2&n){e.oxw();const t=e.MAs(9),o=e.MAs(20);e.xp6(1),e.Q6J("ngTemplateOutlet",t),e.xp6(1),e.Q6J("ngTemplateOutlet",o)}}function zn(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"label",16),e._uU(2),e.qZA(),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("nzValue",t.value),e.xp6(1),e.Oqu(t.label)}}function Cn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-radio-group",14),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selection=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().selectionChange.emit(i)}),e.YNc(1,zn,3,2,"ng-container",15),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("ngModel",t.selection),e.xp6(1),e.Q6J("ngForOf",t.selections)}}function Tn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-select",17),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().selection=i})("ngModelChange",function(i){return e.CHM(t),e.oxw().selectionChange.emit(i)}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("nzOptions",t.selections)("ngModel",t.selection)}}function kn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"i",23),e.NdJ("click",function(){e.CHM(t),e.oxw(2);const i=e.MAs(2),r=e.oxw();return i.value="",r.onFilterInput("")}),e.qZA()}}function xn(n,s){if(1&n&&e.YNc(0,kn,1,0,"i",22),2&n){e.oxw();const t=e.MAs(2);e.Q6J("ngIf",t.value)}}function vn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-input-group",18),e.TgZ(1,"input",19,20),e.NdJ("input",function(){e.CHM(t);const i=e.MAs(2);return e.oxw().onFilterInput(i.value)}),e.qZA(),e.qZA(),e.YNc(3,xn,1,1,"ng-template",null,21,e.W1O)}if(2&n){const t=e.MAs(4);e.Q6J("nzSuffix",t)}}function bn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleReverse()}),e.TgZ(1,"span"),e._uU(2),e.qZA(),e._UZ(3,"i",25),e.qZA()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(t.reverse?"\u5012\u5e8f":"\u6b63\u5e8f"),e.xp6(1),e.Q6J("nzType",t.reverse?"swap-left":"swap-right")("nzRotate",90)}}function yn(n,s){if(1&n&&(e.TgZ(0,"button",26),e._UZ(1,"i",27),e.qZA()),2&n){e.oxw();const t=e.MAs(15);e.Q6J("nzDropdownMenu",t)}}function Mn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ul",28),e.TgZ(1,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().startAllTasks()}),e._uU(2,"\u5168\u90e8\u8fd0\u884c"),e.qZA(),e.TgZ(3,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().stopAllTasks()}),e._uU(4,"\u5168\u90e8\u505c\u6b62"),e.qZA(),e.TgZ(5,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().stopAllTasks(!0)}),e._uU(6,"\u5168\u90e8\u5f3a\u5236\u505c\u6b62"),e.qZA(),e._UZ(7,"li",30),e.TgZ(8,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().disableAllRecorders(!1)}),e._uU(9,"\u5168\u90e8\u5173\u95ed\u5f55\u5236"),e.qZA(),e.TgZ(10,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().disableAllRecorders(!0)}),e._uU(11,"\u5168\u90e8\u5f3a\u5236\u5173\u95ed\u5f55\u5236"),e.qZA(),e._UZ(12,"li",30),e.TgZ(13,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().removeAllTasks()}),e._uU(14,"\u5168\u90e8\u5220\u9664"),e.qZA(),e.TgZ(15,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateAllTaskInfos()}),e._uU(16,"\u5168\u90e8\u5237\u65b0\u6570\u636e"),e.qZA(),e.TgZ(17,"li",29),e.NdJ("click",function(){return e.CHM(t),e.oxw().copyAllTaskRoomIds()}),e._uU(18,"\u590d\u5236\u5168\u90e8\u623f\u95f4\u53f7"),e.qZA(),e.qZA()}}function An(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().drawerVisible=!0}),e._UZ(1,"i",27),e.qZA()}}function On(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"div",35),e._UZ(2,"nz-divider",36),e.GkF(3,8),e._UZ(4,"nz-divider",37),e.TgZ(5,"div",38),e.GkF(6,8),e.qZA(),e.qZA(),e.BQk()),2&n){e.oxw(2);const t=e.MAs(5),o=e.MAs(11);e.xp6(3),e.Q6J("ngTemplateOutlet",t),e.xp6(3),e.Q6J("ngTemplateOutlet",o)}}function Sn(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",39),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).menuDrawerVisible=!1}),e.GkF(2,8),e.qZA(),e.BQk()}if(2&n){e.oxw(2);const t=e.MAs(18);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}const wn=function(){return{padding:"0"}};function Pn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-drawer",32),e.NdJ("nzVisibleChange",function(i){return e.CHM(t),e.oxw().drawerVisible=i})("nzOnClose",function(){return e.CHM(t),e.oxw().drawerVisible=!1}),e.YNc(1,On,7,2,"ng-container",33),e.TgZ(2,"nz-drawer",34),e.NdJ("nzVisibleChange",function(i){return e.CHM(t),e.oxw().menuDrawerVisible=i})("nzOnClose",function(){return e.CHM(t),e.oxw().menuDrawerVisible=!1}),e.YNc(3,Sn,3,1,"ng-container",33),e.qZA(),e.qZA()}if(2&n){const t=e.oxw(),o=e.MAs(23);e.Q6J("nzTitle",o)("nzClosable",!1)("nzVisible",t.drawerVisible),e.xp6(2),e.Q6J("nzClosable",!1)("nzBodyStyle",e.DdM(6,wn))("nzVisible",t.menuDrawerVisible)}}function Zn(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",40),e.TgZ(1,"button",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().menuDrawerVisible=!0}),e._UZ(2,"i",27),e.qZA(),e.qZA()}}let Nn=(()=>{class n{constructor(t,o,i,r,a,u){this.message=i,this.modal=r,this.clipboard=a,this.taskManager=u,this.selectionChange=new e.vpe,this.reverseChange=new e.vpe,this.filterChange=new e.vpe,this.destroyed=new A.xQ,this.useDrawer=!1,this.useSelector=!1,this.useRadioGroup=!0,this.drawerVisible=!1,this.menuDrawerVisible=!1,this.filterTerms=new A.xQ,this.selections=[{label:"\u5168\u90e8",value:y.ALL},{label:"\u5f55\u5236\u4e2d",value:y.RECORDING},{label:"\u5f55\u5236\u5173",value:y.RECORDER_DISABLED},{label:"\u505c\u6b62",value:y.STOPPED},{label:"\u76f4\u64ad",value:y.LIVING},{label:"\u8f6e\u64ad",value:y.ROUNDING},{label:"\u95f2\u7f6e",value:y.PREPARING}],o.observe(ne).pipe((0,v.R)(this.destroyed)).subscribe(d=>{this.useDrawer=d.breakpoints[ne[0]],this.useSelector=d.breakpoints[ne[1]],this.useRadioGroup=d.breakpoints[ne[2]],t.markForCheck()})}ngOnInit(){this.filterTerms.pipe((0,dn.b)(300),(0,mn.x)()).subscribe(t=>{this.filterChange.emit(t)})}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}onFilterInput(t){this.filterTerms.next(t)}toggleReverse(){this.reverse=!this.reverse,this.reverseChange.emit(this.reverse)}removeAllTasks(){this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5220\u9664\u5168\u90e8\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u4efb\u52a1\u5c06\u88ab\u5f3a\u5236\u505c\u6b62\uff01\u4efb\u52a1\u5220\u9664\u540e\u5c06\u4e0d\u53ef\u6062\u590d\uff01",nzOnOk:()=>new Promise((t,o)=>{this.taskManager.removeAllTasks().subscribe(t,o)})})}startAllTasks(){this.taskManager.startAllTasks().subscribe()}stopAllTasks(t=!1){t?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u5168\u90e8\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((o,i)=>{this.taskManager.stopAllTasks(t).subscribe(o,i)})}):this.taskManager.stopAllTasks().subscribe()}disableAllRecorders(t=!1){t?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u5173\u95ed\u5168\u90e8\u4efb\u52a1\u7684\u5f55\u5236\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((o,i)=>{this.taskManager.disableAllRecorders(t).subscribe(o,i)})}):this.taskManager.disableAllRecorders().subscribe()}updateAllTaskInfos(){this.taskManager.updateAllTaskInfos().subscribe()}copyAllTaskRoomIds(){this.taskManager.getAllTaskRoomIds().pipe((0,U.U)(t=>t.join(" ")),(0,C.b)(t=>{if(!this.clipboard.copy(t))throw Error("Failed to copy text to the clipboard")})).subscribe(()=>{this.message.success("\u5168\u90e8\u623f\u95f4\u53f7\u5df2\u590d\u5236\u5230\u526a\u5207\u677f")},t=>{this.message.error("\u590d\u5236\u5168\u90e8\u623f\u95f4\u53f7\u5230\u526a\u5207\u677f\u51fa\u9519",t)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(F.Yg),e.Y36(ke.dD),e.Y36(Q.Sf),e.Y36(w),e.Y36(xe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-toolbar"]],inputs:{selection:"selection",reverse:"reverse"},outputs:{selectionChange:"selectionChange",reverseChange:"reverseChange",filterChange:"filterChange"},decls:24,vars:7,consts:[[1,"controls-wrapper"],[4,"ngIf"],["radioGroup",""],["selector",""],["filter",""],["reorderButton",""],["menuButton",""],["dropdownMenu","nzDropdownMenu"],[3,"ngTemplateOutlet"],["menu",""],["drawerButton",""],["nzPlacement","bottom","nzHeight","auto",3,"nzTitle","nzClosable","nzVisible","nzVisibleChange","nzOnClose",4,"ngIf"],["drawerHeader",""],["nzType","vertical"],["nzButtonStyle","solid",1,"radio-group",3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["nz-radio-button","",3,"nzValue"],[1,"selector",3,"nzOptions","ngModel","ngModelChange"],[1,"filter",3,"nzSuffix"],["nz-input","","type","text","maxlength","18","placeholder","\u7528\u6807\u9898\u3001\u5206\u533a\u3001\u4e3b\u64ad\u540d\u3001\u623f\u95f4\u53f7\u7b5b\u9009",3,"input"],["filterInput",""],["inputClearTpl",""],["nz-icon","","class","filter-clear","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"filter-clear",3,"click"],["nz-button","","nzType","text","nzSize","default",1,"reverse-button",3,"click"],["nz-icon","",3,"nzType","nzRotate"],["nz-button","","nzType","text","nzSize","default","nz-dropdown","","nzPlacement","bottomRight",1,"more-actions-button",3,"nzDropdownMenu"],["nz-icon","","nzType","more"],["nz-menu","",1,"menu"],["nz-menu-item","",3,"click"],["nz-menu-divider",""],["nz-button","","nzType","text","nzSize","default",1,"more-actions-button",3,"click"],["nzPlacement","bottom","nzHeight","auto",3,"nzTitle","nzClosable","nzVisible","nzVisibleChange","nzOnClose"],[4,"nzDrawerContent"],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose"],[1,"drawer-content"],["nzText","\u7b5b\u9009"],["nzText","\u6392\u5e8f"],[1,"reorder-button-wrapper"],[1,"drawer-content",3,"click"],[1,"drawer-header"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,_n,8,4,"ng-container",1),e.YNc(2,hn,8,4,"ng-container",1),e.YNc(3,fn,3,2,"ng-container",1),e.qZA(),e.YNc(4,Cn,2,2,"ng-template",null,2,e.W1O),e.YNc(6,Tn,1,2,"ng-template",null,3,e.W1O),e.YNc(8,vn,5,1,"ng-template",null,4,e.W1O),e.YNc(10,bn,4,3,"ng-template",null,5,e.W1O),e.YNc(12,yn,2,1,"ng-template",null,6,e.W1O),e.TgZ(14,"nz-dropdown-menu",null,7),e.GkF(16,8),e.YNc(17,Mn,19,0,"ng-template",null,9,e.W1O),e.qZA(),e.YNc(19,An,2,0,"ng-template",null,10,e.W1O),e.YNc(21,Pn,4,7,"nz-drawer",11),e.YNc(22,Zn,3,0,"ng-template",null,12,e.W1O)),2&t){const i=e.MAs(18);e.ekj("use-drawer",o.useDrawer),e.xp6(1),e.Q6J("ngIf",o.useRadioGroup),e.xp6(1),e.Q6J("ngIf",o.useSelector),e.xp6(1),e.Q6J("ngIf",o.useDrawer),e.xp6(13),e.Q6J("ngTemplateOutlet",i),e.xp6(5),e.Q6J("ngIf",o.useDrawer)}},directives:[c.O5,$.RR,c.tP,Be.g,me.Dg,g.JJ,g.On,c.sg,me.Of,me.Bq,Te.Vq,de.w,H.gB,H.ke,H.Zp,k.Ls,ee.ix,$.wA,$.cm,oe.wO,oe.r9,oe.YV,te.Vz,te.SQ],styles:[".drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{box-shadow:none;padding:.5em 0}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   *[nz-menu-item][_ngcontent-%COMP%]{margin:0;padding:.5em 2em}.controls-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;grid-gap:.2em;gap:.2em;width:100%;padding:.2em;background:#eee;border:1px solid #d9d9d9;border-left:none;border-right:none}.controls-wrapper[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{height:1.8em;top:0}.controls-wrapper[_ngcontent-%COMP%]:not(.use-drawer)   .filter[_ngcontent-%COMP%]{max-width:18em}.controls-wrapper.use-drawer[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{max-width:unset;width:unset;flex:auto}.reverse-button[_ngcontent-%COMP%]{padding:0 .5em}.reverse-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin:0}.more-actions-button[_ngcontent-%COMP%]{margin-left:auto;border:none;background:inherit}.more-actions-button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.menu[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]{margin:0}.drawer-header[_ngcontent-%COMP%]{display:flex}.drawer-content[_ngcontent-%COMP%]   .reorder-button-wrapper[_ngcontent-%COMP%], .drawer-content[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-gap:2vw;gap:2vw}.drawer-content[_ngcontent-%COMP%]   nz-divider[_ngcontent-%COMP%]:first-of-type{margin-top:0}.drawer-content[_ngcontent-%COMP%]   .radio-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{text-align:center;padding:0}"],changeDetection:0}),n})();var ve=l(4402),Fn=l(4612);function Dn(n,s){1&n&&(e.ynx(0),e._uU(1," \u8bf7\u8f93\u5165\u76f4\u64ad\u95f4\u53f7\u6216 URL "),e.BQk())}function In(n,s){1&n&&(e.ynx(0),e._uU(1," \u8f93\u5165\u6709\u9519\u8bef "),e.BQk())}function Bn(n,s){if(1&n&&(e.YNc(0,Dn,2,0,"ng-container",8),e.YNc(1,In,2,0,"ng-container",8)),2&n){const t=s.$implicit;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("pattern"))}}function Jn(n,s){if(1&n&&(e.ynx(0),e._UZ(1,"nz-alert",9),e.BQk()),2&n){const t=s.$implicit;e.xp6(1),e.Q6J("nzType",t.type)("nzMessage",t.message)}}function En(n,s){if(1&n&&(e.ynx(0),e.TgZ(1,"form",2),e.TgZ(2,"nz-form-item"),e.TgZ(3,"nz-form-control",3),e._UZ(4,"input",4),e.YNc(5,Bn,2,2,"ng-template",null,5,e.W1O),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"div",6),e.YNc(8,Jn,2,2,"ng-container",7),e.qZA(),e.BQk()),2&n){const t=e.MAs(6),o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.formGroup),e.xp6(2),e.Q6J("nzErrorTip",t),e.xp6(1),e.Q6J("pattern",o.pattern),e.xp6(4),e.Q6J("ngForOf",o.resultMessages)}}const Qn=/^https?:\/\/live\.bilibili\.com\/(\d+).*$/,Yn=/^\s*(?:\d+(?:[ ]+\d+)*|https?:\/\/live\.bilibili\.com\/\d+.*)\s*$/;let Un=(()=>{class n{constructor(t,o,i){this.changeDetector=o,this.taskManager=i,this.visible=!1,this.visibleChange=new e.vpe,this.pending=!1,this.resultMessages=[],this.pattern=Yn,this.formGroup=t.group({input:["",[g.kI.required,g.kI.pattern(this.pattern)]]})}get inputControl(){return this.formGroup.get("input")}open(){this.setVisible(!0)}close(){this.resultMessages=[],this.reset(),this.setVisible(!1)}setVisible(t){this.visible=t,this.visibleChange.emit(t),this.changeDetector.markForCheck()}reset(){this.pending=!1,this.formGroup.reset(),this.changeDetector.markForCheck()}handleCancel(){this.close()}handleConfirm(){this.pending=!0;const t=this.inputControl.value.trim();let o;o=t.startsWith("http")?[parseInt(Qn.exec(t)[1])]:new Set(t.split(/\s+/).map(i=>parseInt(i))),(0,ve.D)(o).pipe((0,Fn.b)(i=>this.taskManager.addTask(i)),(0,C.b)(i=>{this.resultMessages.push(i),this.changeDetector.markForCheck()})).subscribe({complete:()=>{this.resultMessages.every(i=>"success"===i.type)?this.close():this.reset()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.qu),e.Y36(e.sBO),e.Y36(xe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-task-dialog"]],inputs:{visible:"visible"},outputs:{visibleChange:"visibleChange"},decls:2,vars:6,consts:[["nzTitle","\u6dfb\u52a0\u4efb\u52a1","nzCentered","","nzOkText","\u6dfb\u52a0",3,"nzVisible","nzOkLoading","nzOkDisabled","nzCancelDisabled","nzClosable","nzMaskClosable","nzOnOk","nzOnCancel"],[4,"nzModalContent"],["nz-form","",3,"formGroup"],["nzHasFeedback","",3,"nzErrorTip"],["nz-input","","required","","placeholder","\u76f4\u64ad\u95f4 URL \u6216\u623f\u95f4\u53f7\uff08\u652f\u6301\u591a\u4e2a\u623f\u95f4\u53f7\u7528\u7a7a\u683c\u9694\u5f00\uff09","formControlName","input",3,"pattern"],["errorTip",""],[1,"result-messages-container"],[4,"ngFor","ngForOf"],[4,"ngIf"],["nzShowIcon","",3,"nzType","nzMessage"]],template:function(t,o){1&t&&(e.TgZ(0,"nz-modal",0),e.NdJ("nzOnOk",function(){return o.handleConfirm()})("nzOnCancel",function(){return o.handleCancel()}),e.YNc(1,En,9,4,"ng-container",1),e.qZA()),2&t&&e.Q6J("nzVisible",o.visible)("nzOkLoading",o.pending)("nzOkDisabled",o.formGroup.invalid)("nzCancelDisabled",o.pending)("nzClosable",!o.pending)("nzMaskClosable",!o.pending)},directives:[Q.du,Q.Hf,g._Y,g.JL,Z.Lr,g.sg,O.SK,Z.Nx,O.t3,Z.Fd,H.Zp,g.Fj,g.Q7,g.JJ,g.u,g.c5,c.sg,c.O5,Mt],styles:[".result-messages-container[_ngcontent-%COMP%]{width:100%;max-height:200px;overflow-y:auto}"],changeDetection:0}),n})();var qn=l(6693),Rn=l(9796),Ln=l(7393),he=l(377),be=l(5345);class $n{constructor(s){this.resultSelector=s}call(s,t){return t.subscribe(new Hn(s,this.resultSelector))}}class Hn extends Ln.L{constructor(s,t,o=Object.create(null)){super(s),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(s){const t=this.iterators;(0,Rn.k)(s)?t.push(new Vn(s)):t.push("function"==typeof s[he.hZ]?new jn(s[he.hZ]()):new Wn(this.destination,this,s))}_complete(){const s=this.iterators,t=s.length;if(this.unsubscribe(),0!==t){this.active=t;for(let o=0;o<t;o++){let i=s[o];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const s=this.iterators,t=s.length,o=this.destination;for(let a=0;a<t;a++){let u=s[a];if("function"==typeof u.hasValue&&!u.hasValue())return}let i=!1;const r=[];for(let a=0;a<t;a++){let u=s[a],d=u.next();if(u.hasCompleted()&&(i=!0),d.done)return void o.complete();r.push(d.value)}this.resultSelector?this._tryresultSelector(r):o.next(r),i&&o.complete()}_tryresultSelector(s){let t;try{t=this.resultSelector.apply(this,s)}catch(o){return void this.destination.error(o)}this.destination.next(t)}}class jn{constructor(s){this.iterator=s,this.nextResult=s.next()}hasValue(){return!0}next(){const s=this.nextResult;return this.nextResult=this.iterator.next(),s}hasCompleted(){const s=this.nextResult;return Boolean(s&&s.done)}}class Vn{constructor(s){this.array=s,this.index=0,this.length=0,this.length=s.length}[he.hZ](){return this}next(s){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class Wn extends be.Ds{constructor(s,t,o){super(s),this.parent=t,this.observable=o,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[he.hZ](){return this}next(){const s=this.buffer;return 0===s.length&&this.isComplete?{value:null,done:!0}:{value:s.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(s){this.buffer.push(s),this.parent.checkIterators()}subscribe(){return(0,be.ft)(this.observable,new be.IY(this))}}var Xn=l(5136);let Kn=(()=>{class n{transform(t){if(t<0)throw RangeError("the argument totalSeconds must be greater than or equal to 0");const o=Math.floor(t/3600),i=Math.floor(t/60%60),r=Math.floor(t%60);let a="";return o>0&&(a+=o+":"),a+=i<10?"0"+i:i,a+=":",a+=r<10?"0"+r:r,a}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"duration",type:n,pure:!0}),n})(),eo=(()=>{class n{transform(t,o=3){let i,r;if(t<=0)return"0B/s";if(t<1e3)i=t,r="B";else if(t<1e6)i=t/1e3,r="kB";else if(t<1e9)i=t/1e6,r="MB";else{if(!(t<1e12))throw RangeError(`the rate argument ${t} out of range`);i=t/1e9,r="GB"}const a=o-Math.floor(Math.abs(Math.log10(i)))-1;return i.toFixed(a)+r+"/s"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"speed",type:n,pure:!0}),n})();var to=l(7612);let no=(()=>{class n{transform(t,o){return to(t,o)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"filesize",type:n,pure:!0}),n})();const oo={2e4:"4K",1e4:"\u539f\u753b",401:"\u84dd\u5149(\u675c\u6bd4)",400:"\u84dd\u5149",250:"\u8d85\u6e05",150:"\u9ad8\u6e05",80:"\u6d41\u7545"};let io=(()=>{class n{transform(t){return oo[t]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"quality",type:n,pure:!0}),n})(),so=(()=>{class n{transform(t){var o,i;return t?t.startsWith("/")?null!==(o=t.split("/").pop())&&void 0!==o?o:"":null!==(i=t.split("\\").pop())&&void 0!==i?i:"":""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"filename",type:n,pure:!0}),n})(),ro=(()=>{class n{transform(t){return t&&0!==t.duration?t.time/t.duration*100:0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"progress",type:n,pure:!0}),n})();const ao=function(){return{spacer:""}};function lo(n,s){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"p",3),e.TgZ(2,"span",4),e._UZ(3,"i"),e.qZA(),e.TgZ(4,"span",5),e._uU(5),e.ALo(6,"duration"),e.qZA(),e.TgZ(7,"span",6),e._uU(8),e.ALo(9,"speed"),e.qZA(),e.TgZ(10,"span",7),e._uU(11),e.ALo(12,"filesize"),e.qZA(),e.TgZ(13,"span",8),e.ALo(14,"number"),e._uU(15),e.ALo(16,"number"),e.qZA(),e.TgZ(17,"span",9),e._uU(18),e.ALo(19,"quality"),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(5),e.hij(" ",e.lcZ(6,6,t.status.elapsed)," "),e.xp6(3),e.hij(" ",e.lcZ(9,8,t.status.data_rate)," "),e.xp6(3),e.hij(" ",e.xi3(12,10,t.status.data_count,e.DdM(21,ao))," "),e.xp6(2),e.MGl("nzTooltipTitle","\u5f39\u5e55\u6570\u91cf\uff1a",e.xi3(14,13,t.status.danmu_count,"1.0-0"),""),e.xp6(2),e.hij(" ",e.xi3(16,16,t.status.danmu_count,"1.0-0")," "),e.xp6(3),e.hij(" ",e.lcZ(19,19,t.status.real_quality_number)," ")}}function co(n,s){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"p",10),e.ALo(2,"filename"),e._uU(3),e.ALo(4,"filename"),e.qZA(),e._UZ(5,"nz-progress",11),e.ALo(6,"progress"),e.qZA()),2&n){const t=e.oxw();let o,i;e.xp6(1),e.MGl("nzTooltipTitle","\u6b63\u5728\u6ce8\u5165\u5143\u6570\u636e\uff1a",e.lcZ(2,7,null!==(o=t.status.postprocessing_path)&&void 0!==o?o:""),""),e.xp6(2),e.hij(" \u6ce8\u5165\u5143\u6570\u636e\uff1a",e.lcZ(4,9,null!==(i=t.status.postprocessing_path)&&void 0!==i?i:"")," "),e.xp6(2),e.Q6J("nzType","line")("nzShowInfo",!1)("nzStrokeLinecap","square")("nzStrokeWidth",2)("nzPercent",null===t.status.postprocessing_progress?0:e.lcZ(6,11,t.status.postprocessing_progress))}}function po(n,s){if(1&n&&(e.TgZ(0,"div",2),e.TgZ(1,"p",12),e.ALo(2,"filename"),e._uU(3),e.ALo(4,"filename"),e.qZA(),e._UZ(5,"nz-progress",11),e.ALo(6,"progress"),e.qZA()),2&n){const t=e.oxw();let o,i;e.xp6(1),e.MGl("nzTooltipTitle","\u6b63\u5728\u8f6c\u6362\u683c\u5f0f\uff1a",e.lcZ(2,7,null!==(o=t.status.postprocessing_path)&&void 0!==o?o:""),""),e.xp6(2),e.hij(" \u8f6c\u6362\u683c\u5f0f\uff1a",e.lcZ(4,9,null!==(i=t.status.postprocessing_path)&&void 0!==i?i:"")," "),e.xp6(2),e.Q6J("nzType","line")("nzShowInfo",!1)("nzStrokeLinecap","square")("nzStrokeWidth",2)("nzPercent",null===t.status.postprocessing_progress?0:e.lcZ(6,11,t.status.postprocessing_progress))}}let uo=(()=>{class n{constructor(){this.RunningStatus=S}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-status-display"]],inputs:{status:"status"},decls:4,vars:4,consts:[[3,"ngSwitch"],["class","status-display",4,"ngSwitchCase"],[1,"status-display"],[1,"status-bar","recording"],["nz-tooltip","","nzTooltipTitle","\u6b63\u5728\u5f55\u5236\u4e2d","nzTooltipPlacement","top",1,"status-indicator"],["nz-tooltip","","nzTooltipTitle","\u5f00\u59cb\u5f55\u5236\u5230\u73b0\u5728\u8fc7\u53bb\u7684\u65f6\u95f4","nzTooltipPlacement","top",1,"time-elapsed"],["nz-tooltip","","nzTooltipTitle","\u5f53\u524d\u5b9e\u65f6\u5f55\u5236\u901f\u5ea6","nzTooltipPlacement","top",1,"data-rate"],["nz-tooltip","","nzTooltipTitle","\u5df2\u5f55\u5236\u7684\u6570\u636e","nzTooltipPlacement","top",1,"data-count"],["nz-tooltip","","nzTooltipPlacement","top",1,"danmu-count",3,"nzTooltipTitle"],["nz-tooltip","","nzTooltipTitle","\u5f53\u524d\u5f55\u5236\u7684\u753b\u8d28","nzTooltipPlacement","leftTop",1,"quality"],["nz-tooltip","","nzTooltipPlacement","top",1,"status-bar","injecting",3,"nzTooltipTitle"],[3,"nzType","nzShowInfo","nzStrokeLinecap","nzStrokeWidth","nzPercent"],["nz-tooltip","","nzTooltipPlacement","top",1,"status-bar","remuxing",3,"nzTooltipTitle"]],template:function(t,o){1&t&&(e.ynx(0,0),e.YNc(1,lo,20,22,"div",1),e.YNc(2,co,7,13,"div",1),e.YNc(3,po,7,13,"div",1),e.BQk()),2&t&&(e.Q6J("ngSwitch",o.status.running_status),e.xp6(1),e.Q6J("ngSwitchCase",o.RunningStatus.RECORDING),e.xp6(1),e.Q6J("ngSwitchCase",o.RunningStatus.INJECTING),e.xp6(1),e.Q6J("ngSwitchCase",o.RunningStatus.REMUXING))},directives:[c.RF,c.n9,E.SY,en],pipes:[Kn,eo,no,c.JJ,io,so,ro],styles:[".status-bar[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px black;margin:0;padding:0 .5rem;background:rgba(0,0,0,.32)}.status-display[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}.status-bar[_ngcontent-%COMP%]{display:flex;grid-gap:1rem;gap:1rem;font-size:1rem;line-height:1.8}.status-bar.recording[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.status-bar.recording[_ngcontent-%COMP%]   .status-indicator[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{width:1rem;height:1rem;border-radius:.5rem;color:red;background:red;animation:blinker 1s cubic-bezier(1,0,0,1) infinite}@keyframes blinker{0%{opacity:0}to{opacity:1}}.status-bar.injecting[_ngcontent-%COMP%], .status-bar.remuxing[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.status-bar[_ngcontent-%COMP%]   .danmu-count[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.status-bar[_ngcontent-%COMP%]   .quality[_ngcontent-%COMP%]{flex:none;margin-left:auto}nz-progress[_ngcontent-%COMP%]{display:flex}nz-progress[_ngcontent-%COMP%]  .ant-progress-outer{display:flex}"],changeDetection:0}),n})();var q=l(2502),go=l(2134),N=l(8737);function mo(n,s){1&n&&(e.ynx(0),e._uU(1," \u8bf7\u8f93\u5165\u8def\u5f84\u6a21\u677f "),e.BQk())}function _o(n,s){1&n&&(e.ynx(0),e._uU(1," \u8def\u5f84\u6a21\u677f\u6709\u9519\u8bef "),e.BQk())}function ho(n,s){if(1&n&&(e.YNc(0,mo,2,0,"ng-container",41),e.YNc(1,_o,2,0,"ng-container",41)),2&n){const t=s.$implicit;e.Q6J("ngIf",t.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.hasError("pattern"))}}function fo(n,s){1&n&&(e.ynx(0),e._uU(1," \u8bf7\u8f93\u5165 User Agent "),e.BQk())}function zo(n,s){1&n&&e.YNc(0,fo,2,0,"ng-container",41),2&n&&e.Q6J("ngIf",s.$implicit.hasError("required"))}function Co(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"form",2),e.TgZ(2,"div",3),e.TgZ(3,"h2"),e._uU(4,"\u6587\u4ef6"),e.qZA(),e.TgZ(5,"nz-form-item",4),e.TgZ(6,"nz-form-label",5),e._uU(7,"\u8def\u5f84\u6a21\u677f"),e.qZA(),e.TgZ(8,"nz-form-control",6),e.TgZ(9,"input",7),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.output.pathTemplate=i}),e.qZA(),e.YNc(10,ho,2,2,"ng-template",null,8,e.W1O),e.qZA(),e.TgZ(12,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.output.pathTemplate=i?r.globalSettings.output.pathTemplate:null}),e._uU(13,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(14,"nz-form-item",10),e.TgZ(15,"nz-form-label",11),e._uU(16,"\u5927\u5c0f\u9650\u5236"),e.qZA(),e.TgZ(17,"nz-form-control",12),e.TgZ(18,"nz-select",13),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.output.filesizeLimit=i}),e.qZA(),e.qZA(),e.TgZ(19,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.output.filesizeLimit=i?r.globalSettings.output.filesizeLimit:null}),e._uU(20,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(21,"nz-form-item",10),e.TgZ(22,"nz-form-label",11),e._uU(23,"\u65f6\u957f\u9650\u5236"),e.qZA(),e.TgZ(24,"nz-form-control",12),e.TgZ(25,"nz-select",14),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.output.durationLimit=i}),e.qZA(),e.qZA(),e.TgZ(26,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.output.durationLimit=i?r.globalSettings.output.durationLimit:null}),e._uU(27,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div",15),e.TgZ(29,"h2"),e._uU(30,"\u5f55\u5236"),e.qZA(),e.TgZ(31,"nz-form-item",10),e.TgZ(32,"nz-form-label",16),e._uU(33,"\u753b\u8d28"),e.qZA(),e.TgZ(34,"nz-form-control",12),e.TgZ(35,"nz-select",17),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.recorder.qualityNumber=i}),e.qZA(),e.qZA(),e.TgZ(36,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.recorder.qualityNumber=i?r.globalSettings.recorder.qualityNumber:null}),e._uU(37,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(38,"nz-form-item",10),e.TgZ(39,"nz-form-label",18),e._uU(40,"\u6570\u636e\u8bfb\u53d6\u8d85\u65f6"),e.qZA(),e.TgZ(41,"nz-form-control",19),e.TgZ(42,"nz-select",20,21),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.recorder.readTimeout=i}),e.qZA(),e.qZA(),e.TgZ(44,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.recorder.readTimeout=i?r.globalSettings.recorder.readTimeout:null}),e._uU(45,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(46,"nz-form-item",10),e.TgZ(47,"nz-form-label",18),e._uU(48,"\u786c\u76d8\u5199\u5165\u7f13\u51b2"),e.qZA(),e.TgZ(49,"nz-form-control",12),e.TgZ(50,"nz-select",22),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.recorder.bufferSize=i}),e.qZA(),e.qZA(),e.TgZ(51,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.recorder.bufferSize=i?r.globalSettings.recorder.bufferSize:null}),e._uU(52,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(53,"div",23),e.TgZ(54,"h2"),e._uU(55,"\u5f39\u5e55"),e.qZA(),e.TgZ(56,"nz-form-item",10),e.TgZ(57,"nz-form-label",24),e._uU(58,"\u5f39\u5e55\u52a0\u7528\u6237\u540d"),e.qZA(),e.TgZ(59,"nz-form-control",25),e.TgZ(60,"nz-switch",26),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.danmaku.danmuUname=i}),e.qZA(),e.qZA(),e.TgZ(61,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.danmaku.danmuUname=i?r.globalSettings.danmaku.danmuUname:null}),e._uU(62,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(63,"div",27),e.TgZ(64,"h2"),e._uU(65,"\u6587\u4ef6\u5904\u7406"),e.qZA(),e.TgZ(66,"nz-form-item",10),e.TgZ(67,"nz-form-label",28),e._uU(68,"FLV \u8f6c MP4"),e.qZA(),e.TgZ(69,"nz-form-control",25),e.TgZ(70,"nz-switch",29),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.postprocessing.remuxToMp4=i}),e.qZA(),e.qZA(),e.TgZ(71,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.postprocessing.remuxToMp4=i?r.globalSettings.postprocessing.remuxToMp4:null}),e._uU(72,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(73,"nz-form-item",10),e.TgZ(74,"nz-form-label",18),e._uU(75,"\u6e90\u6587\u4ef6\u5220\u9664\u7b56\u7565"),e.qZA(),e.TgZ(76,"nz-form-control",12),e.TgZ(77,"nz-select",30),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.postprocessing.deleteSource=i}),e.qZA(),e.qZA(),e.TgZ(78,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.postprocessing.deleteSource=i?r.globalSettings.postprocessing.deleteSource:null}),e._uU(79,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",31),e.TgZ(81,"h2"),e._uU(82,"\u7f51\u7edc\u8bf7\u6c42"),e.qZA(),e.TgZ(83,"nz-form-item",32),e.TgZ(84,"nz-form-label",33),e._uU(85,"User Agent"),e.qZA(),e.TgZ(86,"nz-form-control",34),e.TgZ(87,"textarea",35,36),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.header.userAgent=i}),e.qZA(),e.qZA(),e.YNc(89,zo,1,1,"ng-template",null,8,e.W1O),e.TgZ(91,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.header.userAgent=i?r.globalSettings.header.userAgent:null}),e._uU(92,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.TgZ(93,"nz-form-item",32),e.TgZ(94,"nz-form-label",37),e._uU(95,"Cookie"),e.qZA(),e.TgZ(96,"nz-form-control",38),e.TgZ(97,"textarea",39,40),e.NdJ("ngModelChange",function(i){return e.CHM(t),e.oxw().model.header.cookie=i}),e.qZA(),e.qZA(),e.TgZ(99,"label",9),e.NdJ("nzCheckedChange",function(i){e.CHM(t);const r=e.oxw();return r.options.header.cookie=i?r.globalSettings.header.cookie:null}),e._uU(100,"\u8986\u76d6\u5168\u5c40\u8bbe\u7f6e"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.BQk()}if(2&n){const t=e.MAs(11),o=e.MAs(43),i=e.MAs(88),r=e.MAs(98),a=e.oxw();e.xp6(8),e.Q6J("nzErrorTip",t),e.xp6(1),e.Q6J("pattern",a.pathTemplatePattern)("ngModel",a.model.output.pathTemplate)("disabled",null===a.options.output.pathTemplate),e.xp6(3),e.Q6J("nzChecked",null!==a.options.output.pathTemplate),e.xp6(3),e.Q6J("nzTooltipTitle",a.splitFileTip),e.xp6(3),e.Q6J("ngModel",a.model.output.filesizeLimit)("disabled",null===a.options.output.filesizeLimit)("nzOptions",a.filesizeLimitOptions),e.xp6(1),e.Q6J("nzChecked",null!==a.options.output.filesizeLimit),e.xp6(3),e.Q6J("nzTooltipTitle",a.splitFileTip),e.xp6(3),e.Q6J("ngModel",a.model.output.durationLimit)("disabled",null===a.options.output.durationLimit)("nzOptions",a.durationLimitOptions),e.xp6(1),e.Q6J("nzChecked",null!==a.options.output.durationLimit),e.xp6(9),e.Q6J("ngModel",a.model.recorder.qualityNumber)("disabled",null===a.options.recorder.qualityNumber)("nzOptions",a.qualityOptions),e.xp6(1),e.Q6J("nzChecked",null!==a.options.recorder.qualityNumber),e.xp6(5),e.Q6J("nzValidateStatus",o.value>3?"warning":o),e.xp6(1),e.Q6J("ngModel",a.model.recorder.readTimeout)("disabled",null===a.options.recorder.readTimeout)("nzOptions",a.timeoutOptions),e.xp6(2),e.Q6J("nzChecked",null!==a.options.recorder.readTimeout),e.xp6(6),e.Q6J("ngModel",a.model.recorder.bufferSize)("disabled",null===a.options.recorder.bufferSize)("nzOptions",a.bufferOptions)("nzOptionOverflowSize",6),e.xp6(1),e.Q6J("nzChecked",null!==a.options.recorder.bufferSize),e.xp6(9),e.Q6J("ngModel",a.model.danmaku.danmuUname)("disabled",null===a.options.danmaku.danmuUname),e.xp6(1),e.Q6J("nzChecked",null!==a.options.danmaku.danmuUname),e.xp6(9),e.Q6J("ngModel",a.model.postprocessing.remuxToMp4)("disabled",null===a.options.postprocessing.remuxToMp4),e.xp6(1),e.Q6J("nzChecked",null!==a.options.postprocessing.remuxToMp4),e.xp6(6),e.Q6J("ngModel",a.model.postprocessing.deleteSource)("disabled",null===a.options.postprocessing.deleteSource)("nzOptions",a.deleteStrategies),e.xp6(1),e.Q6J("nzChecked",null!==a.options.postprocessing.deleteSource),e.xp6(8),e.Q6J("nzWarningTip",a.warningTip)("nzValidateStatus",i.valid&&a.options.header.userAgent!==a.taskOptions.header.userAgent&&a.options.header.userAgent!==a.globalSettings.header.userAgent?"warning":i)("nzErrorTip",t),e.xp6(1),e.Q6J("rows",3)("ngModel",a.model.header.userAgent)("disabled",null===a.options.header.userAgent),e.xp6(4),e.Q6J("nzChecked",null!==a.options.header.userAgent),e.xp6(5),e.Q6J("nzWarningTip",a.warningTip)("nzValidateStatus",r.valid&&a.options.header.cookie!==a.taskOptions.header.cookie&&a.options.header.cookie!==a.globalSettings.header.cookie?"warning":r),e.xp6(1),e.Q6J("rows",3)("ngModel",a.model.header.cookie)("disabled",null===a.options.header.cookie),e.xp6(2),e.Q6J("nzChecked",null!==a.options.header.cookie)}}let To=(()=>{class n{constructor(t){this.changeDetector=t,this.visible=!1,this.visibleChange=new e.vpe,this.cancel=new e.vpe,this.confirm=new e.vpe,this.afterOpen=new e.vpe,this.afterClose=new e.vpe,this.warningTip="\u9700\u8981\u91cd\u542f\u5f39\u5e55\u5ba2\u6237\u7aef\u624d\u80fd\u751f\u6548\uff0c\u5982\u679c\u4efb\u52a1\u6b63\u5728\u5f55\u5236\u53ef\u80fd\u4f1a\u4e22\u5931\u5f39\u5e55\uff01",this.splitFileTip=N.Uk,this.pathTemplatePattern=N._m,this.filesizeLimitOptions=(0,q.Z)(N.Pu),this.durationLimitOptions=(0,q.Z)(N.Fg),this.qualityOptions=(0,q.Z)(N.O6),this.timeoutOptions=(0,q.Z)(N.D4),this.bufferOptions=(0,q.Z)(N.Rc),this.deleteStrategies=(0,q.Z)(N.rc)}ngOnChanges(){this.options=(0,q.Z)(this.taskOptions),this.setupModel(),this.changeDetector.markForCheck()}close(){this.setVisible(!1)}setVisible(t){this.visible=t,this.visibleChange.emit(t),this.changeDetector.markForCheck()}handleCancel(){this.cancel.emit(),this.close()}handleConfirm(){this.confirm.emit((0,go.e)(this.options,this.taskOptions)),this.close()}setupModel(){const t={};for(const o of Object.keys(this.options)){const a=this.globalSettings[o];Reflect.set(t,o,new Proxy(this.options[o],{get:(u,d)=>{var T;return null!==(T=Reflect.get(u,d))&&void 0!==T?T:Reflect.get(a,d)},set:(u,d,T)=>Reflect.set(u,d,T)}))}this.model=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-task-settings-dialog"]],viewQuery:function(t,o){if(1&t&&e.Gf(g.F,5),2&t){let i;e.iGM(i=e.CRH())&&(o.ngForm=i.first)}},inputs:{taskOptions:"taskOptions",globalSettings:"globalSettings",visible:"visible"},outputs:{visibleChange:"visibleChange",cancel:"cancel",confirm:"confirm",afterOpen:"afterOpen",afterClose:"afterClose"},features:[e.TTD],decls:2,vars:2,consts:[["nzTitle","\u4efb\u52a1\u8bbe\u7f6e","nzCentered","",3,"nzVisible","nzOkDisabled","nzOnOk","nzOnCancel","nzAfterOpen","nzAfterClose"],[4,"nzModalContent"],["nz-form","","ngForm",""],["ngModelGroup","output",1,"form-group","output"],[1,"setting-item","input"],["nzNoColon","","nzTooltipTitle","\u53d8\u91cf\u8bf4\u660e\u8bf7\u67e5\u770b\u5bf9\u5e94\u5168\u5c40\u8bbe\u7f6e",1,"setting-label"],[1,"setting-control","input",3,"nzErrorTip"],["type","text","required","","nz-input","","name","pathTemplate",3,"pattern","ngModel","disabled","ngModelChange"],["errorTip",""],["nz-checkbox","",3,"nzChecked","nzCheckedChange"],[1,"setting-item"],["nzNoColon","",1,"setting-label",3,"nzTooltipTitle"],[1,"setting-control","select"],["name","filesizeLimit",3,"ngModel","disabled","nzOptions","ngModelChange"],["name","durationLimit",3,"ngModel","disabled","nzOptions","ngModelChange"],["ngModelGroup","recorder",1,"form-group","recorder"],["nzNoColon","","nzTooltipTitle","\u6240\u9009\u753b\u8d28\u4e0d\u5b58\u5728\u5c06\u4ee5\u539f\u753b\u4ee3\u66ff",1,"setting-label"],["name","qualityNumber",3,"ngModel","disabled","nzOptions","ngModelChange"],["nzNoColon","",1,"setting-label"],["nzWarningTip","\u65e0\u7f1d\u62fc\u63a5\u4f1a\u5931\u6548\uff01",1,"setting-control","select",3,"nzValidateStatus"],["name","readTimeout",3,"ngModel","disabled","nzOptions","ngModelChange"],["readTimeout","ngModel"],["name","bufferSize",3,"ngModel","disabled","nzOptions","nzOptionOverflowSize","ngModelChange"],["ngModelGroup","danmaku",1,"form-group","danmaku"],["nzFor","danmuUname","nzNoColon","",1,"setting-label"],[1,"setting-control","switch"],["id","danmuUname","name","danmuUname",3,"ngModel","disabled","ngModelChange"],["ngModelGroup","postprocessing",1,"form-group","postprocessing"],["nzNoColon","","nzTooltipTitle","\u9700\u8981\u5b89\u88c5 FFmpeg",1,"setting-label"],["name","remuxToMp4",3,"ngModel","disabled","ngModelChange"],["name","deleteSource",3,"ngModel","disabled","nzOptions","ngModelChange"],["ngModelGroup","header",1,"form-group","header"],[1,"setting-item","textarea"],["nzFor","userAgent","nzNoColon","",1,"setting-label"],[1,"setting-control","textarea",3,"nzWarningTip","nzValidateStatus","nzErrorTip"],["nz-input","","required","","id","userAgent","name","userAgent",3,"rows","ngModel","disabled","ngModelChange"],["userAgent","ngModel"],["nzFor","cookie","nzNoColon","",1,"setting-label"],[1,"setting-control","textarea",3,"nzWarningTip","nzValidateStatus"],["nz-input","","id","cookie","name","cookie",3,"rows","ngModel","disabled","ngModelChange"],["cookie","ngModel"],[4,"ngIf"]],template:function(t,o){1&t&&(e.TgZ(0,"nz-modal",0),e.NdJ("nzOnOk",function(){return o.handleConfirm()})("nzOnCancel",function(){return o.handleCancel()})("nzAfterOpen",function(){return o.afterOpen.emit()})("nzAfterClose",function(){return o.afterClose.emit()}),e.YNc(1,Co,101,52,"ng-container",1),e.qZA()),2&t&&e.Q6J("nzVisible",o.visible)("nzOkDisabled",null==o.ngForm||null==o.ngForm.form?null:o.ngForm.form.invalid)},directives:[Q.du,Q.Hf,g._Y,g.JL,g.F,Z.Lr,g.Mq,O.SK,Z.Nx,O.t3,Z.iK,Z.Fd,H.Zp,g.Fj,g.Q7,g.c5,g.JJ,g.On,we.Ie,Te.Vq,Ce.i,c.O5],styles:[".settings-page[_ngcontent-%COMP%]{max-width:680px;margin:0 auto}.setting-item[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;margin:0;padding:1em 2em;border-top:1px solid rgba(0,0,0,.06)}.setting-item[_ngcontent-%COMP%]:first-child{border-top:none}.settings-page-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%}.form-group[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-weight:bold;font-size:1.2em;border-bottom:1px solid rgba(0,0,0,.1)}.setting-item[_ngcontent-%COMP%]{grid-gap:.5em;gap:.5em}.setting-item.actionable[_ngcontent-%COMP%]{cursor:pointer}.setting-item.actionable[_ngcontent-%COMP%]:hover{background-color:#2021241a}a.setting-item[_ngcontent-%COMP%]{outline:none;text-decoration:none;color:inherit;cursor:pointer}a.setting-item[_ngcontent-%COMP%]:hover{background-color:#2021241a}.setting-label[_ngcontent-%COMP%]{padding:0!important;max-width:-webkit-fit-content!important;max-width:-moz-fit-content!important;max-width:fit-content!important;text-align:left}.setting-label.align-required[_ngcontent-%COMP%]{position:relative;left:11px}.setting-control[_ngcontent-%COMP%], .setting-value[_ngcontent-%COMP%]{max-width:-webkit-fit-content!important;max-width:-moz-fit-content!important;max-width:fit-content!important;margin-left:auto!important}.setting-control.input[_ngcontent-%COMP%], .setting-value.input[_ngcontent-%COMP%]{max-width:100%!important}.setting-control.select[_ngcontent-%COMP%], .setting-value.select[_ngcontent-%COMP%]{max-width:8em!important;width:8em!important}.setting-control.switch[_ngcontent-%COMP%], .setting-value.switch[_ngcontent-%COMP%]{flex-direction:row-reverse;align-items:center}.setting-control.checkbox[_ngcontent-%COMP%], .setting-value.checkbox[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin-left:0}.setting-control.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .setting-value.checkbox[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:100%}.setting-control.textarea[_ngcontent-%COMP%], .setting-value.textarea[_ngcontent-%COMP%]{max-width:100%!important;width:100%!important;margin-left:0}@media screen and (max-width: 332px){.setting-control.radio[_ngcontent-%COMP%], .setting-value.radio[_ngcontent-%COMP%]{margin-left:0!important}}@media screen and (max-width: 319px){.setting-control.select[_ngcontent-%COMP%], .setting-value.select[_ngcontent-%COMP%]{margin-left:0!important}}.setting-value[_ngcontent-%COMP%]{color:#5f6368;font-weight:400}nz-divider[_ngcontent-%COMP%]{margin:0!important}.form-group[_ngcontent-%COMP%]:last-child   .setting-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.setting-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);align-items:center;padding:1em 0;grid-gap:1em;gap:1em;border:none}.setting-item[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0!important}.setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{justify-self:start}.setting-item[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{justify-self:center}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{justify-self:end}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]  span:last-of-type{padding-right:0}.setting-item.input[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.setting-item.input[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{grid-row:1/2;grid-column:1/2;justify-self:center}.setting-item.input[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   .setting-control[_ngcontent-%COMP%]{grid-row:2/3;grid-column:1/-1;justify-self:stretch}.setting-item.input[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%], .setting-item.textarea[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{grid-row:1/2;grid-column:2/3;justify-self:center}@media screen and (max-width: 450px){.setting-item[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}.setting-item[_ngcontent-%COMP%]   .setting-label[_ngcontent-%COMP%]{grid-column:1/-1;justify-self:center}.setting-item[_ngcontent-%COMP%]   label[nz-checkbox][_ngcontent-%COMP%]{justify-self:end}}"],changeDetection:0}),n})();function He(n,s,t,o,i,r,a){try{var u=n[r](a),d=u.value}catch(T){return void t(T)}u.done?s(d):Promise.resolve(d).then(o,i)}var xo=l(2759),vo=l(9075);const ye=new Map,Me=new Map;let bo=(()=>{class n{constructor(t){this.domSanitizer=t}transform(t,o="object"){return"object"===o?Me.has(t)?(0,Y.of)(Me.get(t)):(0,ve.D)(this.fetchImage(t)).pipe((0,U.U)(i=>URL.createObjectURL(i)),(0,U.U)(i=>this.domSanitizer.bypassSecurityTrustUrl(i)),(0,C.b)(i=>Me.set(t,i)),(0,_e.K)(()=>(0,Y.of)(this.domSanitizer.bypassSecurityTrustUrl("")))):ye.has(t)?(0,Y.of)(ye.get(t)):(0,ve.D)(this.fetchImage(t)).pipe((0,Re.w)(i=>this.createDataURL(i)),(0,C.b)(i=>ye.set(t,i)),(0,_e.K)(()=>(0,Y.of)(this.domSanitizer.bypassSecurityTrustUrl(""))))}fetchImage(t){return function(n){return function(){var s=this,t=arguments;return new Promise(function(o,i){var r=n.apply(s,t);function a(d){He(r,o,i,a,u,"next",d)}function u(d){He(r,o,i,a,u,"throw",d)}a(void 0)})}}(function*(){return yield(yield fetch(t,{referrer:""})).blob()})()}createDataURL(t){const o=new FileReader,i=(0,xo.R)(o,"load").pipe((0,U.U)(()=>this.domSanitizer.bypassSecurityTrustUrl(o.result)));return o.readAsDataURL(t),i}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(vo.H7,16))},n.\u0275pipe=e.Yjl({name:"dataurl",type:n,pure:!0}),n})();function yo(n,s){if(1&n&&(e.TgZ(0,"div",15),e._UZ(1,"img",16),e.ALo(2,"async"),e.ALo(3,"dataurl"),e.TgZ(4,"h2",17),e._uU(5),e.qZA(),e._UZ(6,"app-status-display",18),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("src",e.lcZ(2,4,e.lcZ(3,6,t.data.room_info.cover)),e.LSH),e.xp6(3),e.Q6J("nzTooltipTitle","\u76f4\u64ad\u95f4\u6807\u9898\uff1a"+t.data.room_info.title),e.xp6(1),e.hij(" ",t.data.room_info.title," "),e.xp6(1),e.Q6J("status",t.data.task_status)}}function Mo(n,s){if(1&n&&(e._UZ(0,"nz-avatar",19),e.ALo(1,"async"),e.ALo(2,"dataurl")),2&n){const t=e.oxw();e.Q6J("nzShape","square")("nzSize",54)("nzSrc",e.lcZ(1,3,e.lcZ(2,5,t.data.user_info.face)))}}function Ao(n,s){1&n&&(e.TgZ(0,"nz-tag",28),e._UZ(1,"i",29),e.TgZ(2,"span"),e._uU(3,"\u672a\u5f00\u64ad"),e.qZA(),e.qZA())}function Oo(n,s){1&n&&(e.TgZ(0,"nz-tag",30),e._UZ(1,"i",31),e.TgZ(2,"span"),e._uU(3,"\u76f4\u64ad\u4e2d"),e.qZA(),e.qZA())}function So(n,s){1&n&&(e.TgZ(0,"nz-tag",32),e._UZ(1,"i",33),e.TgZ(2,"span"),e._uU(3,"\u8f6e\u64ad\u4e2d"),e.qZA(),e.qZA())}function wo(n,s){if(1&n&&(e.TgZ(0,"p",20),e.TgZ(1,"span",21),e.TgZ(2,"a",22),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"span",23),e.ynx(5,24),e.YNc(6,Ao,4,0,"nz-tag",25),e.YNc(7,Oo,4,0,"nz-tag",26),e.YNc(8,So,4,0,"nz-tag",27),e.BQk(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.MGl("href","https://space.bilibili.com/",t.data.user_info.uid,"",e.LSH),e.xp6(1),e.hij(" ",t.data.user_info.name," "),e.xp6(2),e.Q6J("ngSwitch",t.data.room_info.live_status),e.xp6(1),e.Q6J("ngSwitchCase",0),e.xp6(1),e.Q6J("ngSwitchCase",1),e.xp6(1),e.Q6J("ngSwitchCase",2)}}function Po(n,s){if(1&n&&(e.TgZ(0,"span",41),e.TgZ(1,"a",22),e._uU(2),e.qZA(),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.MGl("href","https://live.bilibili.com/",t.data.room_info.short_room_id,"",e.LSH),e.xp6(1),e.hij(" ",t.data.room_info.short_room_id,"")}}function Zo(n,s){if(1&n&&(e.TgZ(0,"p",34),e.TgZ(1,"span",35),e.TgZ(2,"span",36),e._uU(3,"\u623f\u95f4\u53f7\uff1a"),e.qZA(),e.YNc(4,Po,3,2,"span",37),e.TgZ(5,"span",38),e.TgZ(6,"a",22),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"span",39),e.TgZ(9,"a",22),e.TgZ(10,"nz-tag",40),e._uU(11),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.Q6J("ngIf",t.data.room_info.short_room_id),e.xp6(2),e.MGl("href","https://live.bilibili.com/",t.data.room_info.room_id,"",e.LSH),e.xp6(1),e.Oqu(t.data.room_info.room_id),e.xp6(2),e.hYB("href","https://live.bilibili.com/p/eden/area-tags?parentAreaId=",t.data.room_info.parent_area_id,"&areaId=",t.data.room_info.area_id,"",e.LSH),e.xp6(1),e.Q6J("nzColor","#23ade5"),e.xp6(1),e.hij(" ",t.data.room_info.area_name," ")}}function No(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-switch",42),e.NdJ("click",function(){return e.CHM(t),e.oxw().toggleRecorder()}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("nzDisabled",t.toggleRecorderForbidden)("ngModel",t.data.task_status.recorder_enabled)("nzControl",!0)("nzLoading",t.switchPending)}}function Fo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",43),e.NdJ("nzOnConfirm",function(){return e.CHM(t),e.oxw().removeTask()}),e._UZ(1,"i",44),e.qZA()}}function Do(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"app-task-settings-dialog",48),e.NdJ("visibleChange",function(i){return e.CHM(t),e.oxw(2).settingsDialogVisible=i})("confirm",function(i){return e.CHM(t),e.oxw(2).changeTaskOptions(i)})("afterClose",function(){return e.CHM(t),e.oxw(2).cleanSettingsData()}),e.qZA(),e.BQk()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("taskOptions",t.taskOptions)("globalSettings",t.globalSettings)("visible",t.settingsDialogVisible)}}function Io(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",45),e.NdJ("click",function(){return e.CHM(t),e.oxw().openSettingsDialog()}),e._UZ(1,"i",46),e.qZA(),e.YNc(2,Do,2,3,"ng-container",47)}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",t.taskOptions&&t.globalSettings)}}function Bo(n,s){if(1&n&&(e.TgZ(0,"div",51),e._UZ(1,"i",52),e.qZA()),2&n){e.oxw(2);const t=e.MAs(20);e.Q6J("nzDropdownMenu",t)}}function Jo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",53),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).menuDrawerVisible=!0}),e._UZ(1,"i",52),e.qZA()}}function Eo(n,s){if(1&n&&(e.YNc(0,Bo,2,1,"div",49),e.YNc(1,Jo,2,0,"div",50)),2&n){const t=e.oxw();e.Q6J("ngIf",!t.useDrawer),e.xp6(1),e.Q6J("ngIf",t.useDrawer)}}function Qo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"ul",54),e.TgZ(1,"li",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().startTask()}),e._uU(2,"\u8fd0\u884c\u4efb\u52a1"),e.qZA(),e.TgZ(3,"li",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().stopTask()}),e._uU(4,"\u505c\u6b62\u4efb\u52a1"),e.qZA(),e.TgZ(5,"li",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().stopTask(!0)}),e._uU(6,"\u5f3a\u5236\u505c\u6b62\u4efb\u52a1"),e.qZA(),e.TgZ(7,"li",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().disableRecorder(!0)}),e._uU(8,"\u5f3a\u5236\u5173\u95ed\u5f55\u5236"),e.qZA(),e.TgZ(9,"li",55),e.NdJ("click",function(){return e.CHM(t),e.oxw().updateTaskInfo()}),e._uU(10,"\u5237\u65b0\u6570\u636e"),e.qZA(),e.qZA()}}function Yo(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",58),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).menuDrawerVisible=!1}),e.GkF(2,12),e.qZA(),e.BQk()}if(2&n){e.oxw(2);const t=e.MAs(23);e.xp6(2),e.Q6J("ngTemplateOutlet",t)}}const Uo=function(){return{padding:"0"}};function qo(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"nz-drawer",56),e.NdJ("nzVisibleChange",function(i){return e.CHM(t),e.oxw().menuDrawerVisible=i})("nzOnClose",function(){return e.CHM(t),e.oxw().menuDrawerVisible=!1}),e.YNc(1,Yo,3,1,"ng-container",57),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("nzClosable",!1)("nzBodyStyle",e.DdM(3,Uo))("nzVisible",t.menuDrawerVisible)}}const Ro=function(n,s,t,o){return[n,s,t,o]},Lo=function(){return{padding:"0.5rem"}},Go=function(){return{size:"large"}};let $o=(()=>{class n{constructor(t,o,i,r,a,u){this.changeDetector=o,this.message=i,this.modal=r,this.settingService=a,this.taskManager=u,this.stopped=!1,this.destroyed=new A.xQ,this.useDrawer=!1,this.menuDrawerVisible=!1,this.switchPending=!1,this.settingsDialogVisible=!1,this.RunningStatus=S,t.observe(ne[0]).pipe((0,v.R)(this.destroyed)).subscribe(d=>{this.useDrawer=d.matches,o.markForCheck()})}get roomId(){return this.data.room_info.room_id}get toggleRecorderForbidden(){return!this.data.task_status.monitor_enabled}ngOnChanges(t){console.debug("[ngOnChanges]",this.roomId,t),this.stopped=this.data.task_status.running_status===S.STOPPED}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}updateTaskInfo(){this.taskManager.updateTaskInfo(this.roomId).subscribe()}toggleRecorder(){this.toggleRecorderForbidden||this.switchPending||(this.switchPending=!0,this.data.task_status.recorder_enabled?this.taskManager.disableRecorder(this.roomId).subscribe(()=>this.switchPending=!1):this.taskManager.enableRecorder(this.roomId).subscribe(()=>this.switchPending=!1))}removeTask(){this.taskManager.removeTask(this.roomId).subscribe()}startTask(){this.data.task_status.running_status===S.STOPPED?this.taskManager.startTask(this.roomId).subscribe():this.message.warning("\u4efb\u52a1\u8fd0\u884c\u4e2d\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}stopTask(t=!1){this.data.task_status.running_status!==S.STOPPED?t&&this.data.task_status.running_status==S.RECORDING?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u4efb\u52a1\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((o,i)=>{this.taskManager.stopTask(this.roomId,t).subscribe(o,i)})}):this.taskManager.stopTask(this.roomId).subscribe():this.message.warning("\u4efb\u52a1\u5904\u4e8e\u505c\u6b62\u72b6\u6001\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}disableRecorder(t=!1){this.data.task_status.recorder_enabled?t&&this.data.task_status.running_status==S.RECORDING?this.modal.confirm({nzTitle:"\u786e\u5b9a\u8981\u5f3a\u5236\u505c\u6b62\u5f55\u5236\uff1f",nzContent:"\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\u4f1a\u88ab\u5f3a\u884c\u4e2d\u65ad\uff01\u786e\u5b9a\u8981\u653e\u5f03\u6b63\u5728\u5f55\u5236\u7684\u6587\u4ef6\uff1f",nzOnOk:()=>new Promise((o,i)=>{this.taskManager.disableRecorder(this.roomId,t).subscribe(o,i)})}):this.taskManager.disableRecorder(this.roomId).subscribe():this.message.warning("\u5f55\u5236\u5904\u4e8e\u5173\u95ed\u72b6\u6001\uff0c\u5ffd\u7565\u64cd\u4f5c\u3002")}openSettingsDialog(){(function(...n){const s=n[n.length-1];return"function"==typeof s&&n.pop(),(0,qn.n)(n,void 0).lift(new $n(s))})(this.settingService.getTaskOptions(this.roomId),this.settingService.getSettings(["output","header","danmaku","recorder","postprocessing"])).subscribe(([t,o])=>{this.taskOptions=t,this.globalSettings=o,this.settingsDialogVisible=!0,this.changeDetector.markForCheck()},t=>{this.message.error(`\u83b7\u53d6\u4efb\u52a1\u8bbe\u7f6e\u51fa\u9519: ${t.message}`)})}cleanSettingsData(){delete this.taskOptions,delete this.globalSettings,this.changeDetector.markForCheck()}changeTaskOptions(t){this.settingService.changeTaskOptions(this.roomId,t).pipe((0,Ge.X)(3,300)).subscribe(o=>{this.message.success("\u4fee\u6539\u4efb\u52a1\u8bbe\u7f6e\u6210\u529f")},o=>{this.message.error(`\u4fee\u6539\u4efb\u52a1\u8bbe\u7f6e\u51fa\u9519: ${o.message}`)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(F.Yg),e.Y36(e.sBO),e.Y36(ke.dD),e.Y36(Q.Sf),e.Y36(Xn.R),e.Y36(xe))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-task-item"]],hostVars:2,hostBindings:function(t,o){2&t&&e.ekj("stopped",o.stopped)},inputs:{data:"data"},features:[e.TTD],decls:25,vars:18,consts:[[3,"nzCover","nzActions","nzBodyStyle"],[3,"nzActive","nzLoading","nzAvatar"],[3,"nzAvatar","nzTitle","nzDescription"],["coverTemplate",""],["avatarTemplate",""],["titleTemplate",""],["descTemplate",""],["actionSwitch",""],["actionDelete",""],["actionSetting",""],["actionMore",""],["dropdownMenu","nzDropdownMenu"],[3,"ngTemplateOutlet"],["menu",""],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose",4,"ngIf"],[1,"cover-wrapper"],["alt","\u76f4\u64ad\u95f4\u5c01\u9762",1,"cover",3,"src"],["nz-tooltip","","nzTooltipPlacement","bottomLeft",1,"title",3,"nzTooltipTitle"],[3,"status"],[3,"nzShape","nzSize","nzSrc"],[1,"meta-title"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u4e3b\u64ad\u4e2a\u4eba\u7a7a\u95f4\u9875\u9762","nzTooltipPlacement","right",1,"user-name"],["target","_blank",3,"href"],[1,"live-status"],[3,"ngSwitch"],["nzColor","default",4,"ngSwitchCase"],["nzColor","red",4,"ngSwitchCase"],["nzColor","green",4,"ngSwitchCase"],["nzColor","default"],["nz-icon","","nzType","frown"],["nzColor","red"],["nz-icon","","nzType","fire"],["nzColor","green"],["nz-icon","","nzType","sync","nzSpin",""],[1,"meta-desc"],[1,"room-id-wrapper"],[1,"room-id-label"],["class","short-room-id","nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",4,"ngIf"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",1,"real-room-id"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u5206\u533a\u9875\u9762","nzTooltipPlacement","leftTop",1,"area-name"],[3,"nzColor"],["nz-tooltip","","nzTooltipTitle","\u6253\u5f00\u76f4\u64ad\u95f4\u9875\u9762","nzTooltipPlacement","bottom",1,"short-room-id"],["nz-tooltip","","nzTooltipTitle","\u5f55\u5236\u5f00\u5173",3,"nzDisabled","ngModel","nzControl","nzLoading","click"],["nz-tooltip","","nzTooltipTitle","\u5220\u9664\u4efb\u52a1","nz-popconfirm","","nzPopconfirmTitle","\u786e\u5b9a\u8981\u5220\u9664\u6b64\u4efb\u52a1\uff1f","nzPopconfirmPlacement","topLeft",3,"nzOnConfirm"],["nz-icon","","nzType","delete"],["nz-tooltip","","nzTooltipTitle","\u4efb\u52a1\u8bbe\u7f6e",3,"click"],["nz-icon","","nzType","setting"],[4,"ngIf"],[3,"taskOptions","globalSettings","visible","visibleChange","confirm","afterClose"],["nz-dropdown","","nzPlacement","topRight",3,"nzDropdownMenu",4,"ngIf"],[3,"click",4,"ngIf"],["nz-dropdown","","nzPlacement","topRight",3,"nzDropdownMenu"],["nz-icon","","nzType","more"],[3,"click"],["nz-menu","",1,"menu"],["nz-menu-item","",3,"click"],["nzPlacement","bottom","nzHeight","auto",3,"nzClosable","nzBodyStyle","nzVisible","nzVisibleChange","nzOnClose"],[4,"nzDrawerContent"],[1,"drawer-content",3,"click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"nz-card",0),e.TgZ(1,"nz-skeleton",1),e._UZ(2,"nz-card-meta",2),e.qZA(),e.qZA(),e.YNc(3,yo,7,8,"ng-template",null,3,e.W1O),e.YNc(5,Mo,3,7,"ng-template",null,4,e.W1O),e.YNc(7,wo,9,6,"ng-template",null,5,e.W1O),e.YNc(9,Zo,12,7,"ng-template",null,6,e.W1O),e.YNc(11,No,1,4,"ng-template",null,7,e.W1O),e.YNc(13,Fo,2,0,"ng-template",null,8,e.W1O),e.YNc(15,Io,3,1,"ng-template",null,9,e.W1O),e.YNc(17,Eo,2,2,"ng-template",null,10,e.W1O),e.TgZ(19,"nz-dropdown-menu",null,11),e.GkF(21,12),e.YNc(22,Qo,11,0,"ng-template",null,13,e.W1O),e.qZA(),e.YNc(24,qo,2,4,"nz-drawer",14)),2&t){const i=e.MAs(4),r=e.MAs(6),a=e.MAs(8),u=e.MAs(10),d=e.MAs(12),T=e.MAs(14),M=e.MAs(16),V=e.MAs(18),ie=e.MAs(23);e.Q6J("nzCover",i)("nzActions",e.l5B(11,Ro,T,M,d,V))("nzBodyStyle",e.DdM(16,Lo)),e.xp6(1),e.Q6J("nzActive",!0)("nzLoading",!o.data)("nzAvatar",e.DdM(17,Go)),e.xp6(1),e.Q6J("nzAvatar",r)("nzTitle",a)("nzDescription",u),e.xp6(19),e.Q6J("ngTemplateOutlet",ie),e.xp6(3),e.Q6J("ngIf",o.useDrawer)}},directives:[R.bd,Xe,R.l7,$.RR,c.tP,c.O5,E.SY,uo,K.Dz,c.RF,c.n9,B,k.Ls,de.w,Ce.i,g.JJ,g.On,gt,To,$.cm,oe.wO,oe.r9,te.Vz,te.SQ],pipes:[c.Ov,bo],styles:['.cover-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;text-shadow:1px 1px 2px black;margin:0;padding:0 .5rem;background:rgba(0,0,0,.32)}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{box-shadow:none;padding:.5em 0}.drawer-content[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]   *[nz-menu-item][_ngcontent-%COMP%]{margin:0;padding:.5em 2em}.stopped[_nghost-%COMP%]{filter:grayscale(100%)}a[_ngcontent-%COMP%]{color:inherit}a[_ngcontent-%COMP%]:hover{color:#1890ff}a[_ngcontent-%COMP%]:focus-visible{outline:-webkit-focus-ring-color auto 1px}.cover-wrapper[_ngcontent-%COMP%]{--cover-ratio: 264 / 470;--cover-height: calc(var(--card-width) * var(--cover-ratio));position:relative;width:var(--card-width);height:var(--cover-height)}.cover-wrapper[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{width:100%;max-height:var(--cover-height);object-fit:cover}.cover-wrapper[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;top:.5rem;left:.5rem;font-size:1.2rem;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;max-width:calc(100% - 1em);overflow:hidden;white-space:nowrap;text-overflow:ellipsis}nz-card-meta[_ngcontent-%COMP%]{margin:0}.meta-title[_ngcontent-%COMP%]{margin:0;display:flex;grid-column-gap:1em;column-gap:1em}.meta-title[_ngcontent-%COMP%]   .user-name[_ngcontent-%COMP%]{color:#fb7299;font-size:1rem;font-weight:bold;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.meta-title[_ngcontent-%COMP%]   .live-status[_ngcontent-%COMP%]   nz-tag[_ngcontent-%COMP%]{margin:0;position:relative;bottom:1px}.meta-desc[_ngcontent-%COMP%]{margin:0;display:flex}.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]   .short-room-id[_ngcontent-%COMP%]:after{display:inline-block;width:1em;content:", "}@media screen and (max-width: 320px){.meta-desc[_ngcontent-%COMP%]   .room-id-wrapper[_ngcontent-%COMP%]   .room-id-label[_ngcontent-%COMP%]{display:none}}.meta-desc[_ngcontent-%COMP%]   .area-name[_ngcontent-%COMP%]{margin-left:auto}.meta-desc[_ngcontent-%COMP%]   .area-name[_ngcontent-%COMP%]   nz-tag[_ngcontent-%COMP%]{margin:0;border-radius:30px;padding:0 1em}'],changeDetection:0}),n})();function Ho(n,s){1&n&&(e.TgZ(0,"div",2),e._UZ(1,"nz-empty"),e.qZA())}function jo(n,s){1&n&&e._UZ(0,"app-task-item",6),2&n&&e.Q6J("data",s.$implicit)}function Vo(n,s){if(1&n&&(e.TgZ(0,"div",3,4),e.YNc(2,jo,1,1,"app-task-item",5),e.qZA()),2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngForOf",t.dataList)("ngForTrackBy",t.trackByRoomId)}}let Wo=(()=>{class n{constructor(){this.dataList=[]}trackByRoomId(t,o){return o.room_info.room_id}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-task-list"]],inputs:{dataList:"dataList"},decls:3,vars:2,consts:[["class","empty-container",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"empty-container"],[1,"tasks-container"],["tasks",""],[3,"data",4,"ngFor","ngForOf","ngForTrackBy"],[3,"data"]],template:function(t,o){if(1&t&&(e.YNc(0,Ho,2,0,"div",0),e.YNc(1,Vo,3,2,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",0===o.dataList.length)("ngIfElse",i)}},directives:[c.O5,Je.p9,c.sg,$o],styles:["[_nghost-%COMP%]{height:100%;width:100%;position:relative;display:block;margin:0;padding:1rem;background:#f1f3f4;overflow:auto}[_nghost-%COMP%]{--card-width: 400px;--grid-gutter: 12px;--max-columns: 3;padding:var(--grid-gutter)}@media screen and (max-width: 400px){[_nghost-%COMP%]{--card-width: 100%;padding:var(--grid-gutter) 0}}.tasks-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,var(--card-width));grid-gap:var(--grid-gutter);gap:var(--grid-gutter);justify-content:center;max-width:min(100%,calc(var(--card-width) * var(--max-columns) + var(--grid-gutter) * (var(--max-columns) - 1)));margin:0 auto}.empty-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}"],changeDetection:0}),n})(),Ko=(()=>{class n{transform(t,o=""){return console.debug("filter tasks by '%s'",o),[...this.filterByTerm(t,o)]}filterByTerm(t,o){return function*(n,s){for(const t of n)i=t,(""===(o=o.trim())||i.user_info.name.includes(o)||i.room_info.title.toString().includes(o)||i.room_info.area_name.toString().includes(o)||i.room_info.room_id.toString().includes(o)||i.room_info.short_room_id.toString().includes(o))&&(yield t);var i}(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=e.Yjl({name:"filterTasks",type:n,pure:!0}),n})();function ei(n,s){if(1&n&&e._UZ(0,"nz-spin",6),2&n){const t=e.oxw();e.Q6J("nzSize","large")("nzSpinning",t.loading)}}function ti(n,s){if(1&n&&(e._UZ(0,"app-task-list",7),e.ALo(1,"filterTasks")),2&n){const t=e.oxw();e.Q6J("dataList",e.xi3(1,1,t.dataList,t.filterTerm))}}const je="app-tasks-selection",Ve="app-tasks-reverse",ni=[{path:"",component:(()=>{class n{constructor(t,o,i,r){this.changeDetector=t,this.notification=o,this.storage=i,this.taskService=r,this.loading=!0,this.dataList=[],this.filterTerm="",this.selection=this.retrieveSelection(),this.reverse=this.retrieveReverse()}ngOnInit(){this.syncTaskData()}ngOnDestroy(){this.desyncTaskData()}onSelectionChanged(t){this.selection=t,this.storeSelection(t),this.desyncTaskData(),this.syncTaskData()}onReverseChanged(t){this.reverse=t,this.storeReverse(t),t&&(this.dataList=[...this.dataList.reverse()],this.changeDetector.markForCheck())}retrieveSelection(){const t=this.storage.getData(je);return null!==t?t:y.ALL}retrieveReverse(){return"true"===this.storage.getData(Ve)}storeSelection(t){this.storage.setData(je,t)}storeReverse(t){this.storage.setData(Ve,t.toString())}syncTaskData(){this.dataSubscription=(0,Y.of)((0,Y.of)(0),function(n=0,s=Le.P){return(!(0,rn.k)(n)||n<0)&&(n=0),(!s||"function"!=typeof s.schedule)&&(s=Le.P),new sn.y(t=>(t.add(s.schedule(ln,n,{subscriber:t,counter:0,period:n})),t))}(1e3)).pipe((0,on.u)(),(0,Re.w)(()=>this.taskService.getAllTaskData(this.selection)),(0,_e.K)(t=>{throw this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519",t.message),t}),(0,Ge.X)(10,3e3)).subscribe(t=>{this.loading=!1,this.dataList=this.reverse?t.reverse():t,this.changeDetector.markForCheck()},t=>{this.notification.error("\u83b7\u53d6\u4efb\u52a1\u6570\u636e\u51fa\u9519","\u7f51\u7edc\u8fde\u63a5\u5f02\u5e38, \u8bf7\u5f85\u7f51\u7edc\u6b63\u5e38\u540e\u5237\u65b0\u3002",{nzDuration:0})})}desyncTaskData(){var t;null===(t=this.dataSubscription)||void 0===t||t.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.sBO),e.Y36(cn.zb),e.Y36(pn.V),e.Y36($e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-tasks"]],decls:8,vars:4,consts:[[3,"selection","reverse","selectionChange","reverseChange","filterChange"],["class","spinner",3,"nzSize","nzSpinning",4,"ngIf","ngIfElse"],["elseBlock",""],["nz-button","","nzType","primary","nzSize","large","nzShape","circle","nz-tooltip","","nzTooltipTitle","\u6dfb\u52a0\u4efb\u52a1",1,"add-task-button",3,"click"],["nz-icon","","nzType","plus"],["addTaskDialog",""],[1,"spinner",3,"nzSize","nzSpinning"],[3,"dataList"]],template:function(t,o){if(1&t){const i=e.EpF();e.TgZ(0,"app-toolbar",0),e.NdJ("selectionChange",function(a){return o.onSelectionChanged(a)})("reverseChange",function(a){return o.onReverseChanged(a)})("filterChange",function(a){return o.filterTerm=a}),e.qZA(),e.YNc(1,ei,1,2,"nz-spin",1),e.YNc(2,ti,2,4,"ng-template",null,2,e.W1O),e.TgZ(4,"button",3),e.NdJ("click",function(){return e.CHM(i),e.MAs(7).open()}),e._UZ(5,"i",4),e.qZA(),e._UZ(6,"app-add-task-dialog",null,5)}if(2&t){const i=e.MAs(3);e.Q6J("selection",o.selection)("reverse",o.reverse),e.xp6(1),e.Q6J("ngIf",o.loading)("ngIfElse",i)}},directives:[Nn,c.O5,ee.ix,Ie.dQ,de.w,E.SY,k.Ls,Un,Ee.W,Wo],pipes:[Ko],styles:["[_nghost-%COMP%]{height:100%;width:100%;position:relative;display:block;margin:0;padding:1rem;background:#f1f3f4;overflow:auto}.spinner[_ngcontent-%COMP%]{height:100%;width:100%}[_nghost-%COMP%]{display:flex;flex-direction:column;padding:0;overflow:hidden}.add-task-button[_ngcontent-%COMP%]{position:fixed;bottom:5vh;right:5vw}"],changeDetection:0}),n})()}];let oi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[qe.Bz.forChild(ni)],qe.Bz]}),n})(),ii=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[c.ez,g.u5,g.UX,F.xu,X,O.Jb,R.vh,Se,K.Rt,k.PV,Se,E.cg,re,Ce.m,$.b1,ee.sL,Q.Qp,Z.U5,H.o7,we.Wr,mt,me.aF,Be.S,Je.Xo,Ee.j,At,te.BL,Te.LV,tn,oi,nn.m]]}),n})()}}]);